<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Age Calculator - Calculate Your Age & Zodiac Sign | Udda</title>
  <meta name="description" content="Free Age Calculator - Calculate your age in years, months, days, difference between dates, zodiac sign, next birthday.">
  <meta name="keywords" content="age calculator, calculate age, how old am I, zodiac sign, birthday calculator">
  <meta name="author" content="Udda">
  <meta name="robots" content="index, follow">
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="Age Calculator - Calculate Your Age & Zodiac Sign | Udda">
  <meta property="og:description" content="Free Age Calculator - Calculate your age in years, months, days, difference between dates, zodiac sign, next birthday.">
  <meta property="og:url" content="https://udda.tools/en/tools/age-calculator.html">
  <meta property="og:site_name" content="Udda">
  <meta property="og:locale" content="en_US">
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Age Calculator - Calculate Your Age & Zodiac Sign | Udda">
  <meta name="twitter:description" content="Free Age Calculator - Calculate your age in years, months, days, difference between dates, zodiac sign, next birthday.">
  
  <link rel="alternate" hreflang="ar" href="https://udda.tools/ar/tools/age-calculator.html">
  <link rel="alternate" hreflang="en" href="https://udda.tools/en/tools/age-calculator.html">
  <link rel="alternate" hreflang="x-default" href="https://udda.tools/ar/tools/age-calculator.html">
  <link rel="canonical" href="https://udda.tools/en/tools/age-calculator.html">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../assets/css/main.css">
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Age Calculator",
    "description": "Free Age Calculator - Calculate your age in years, months, days, difference between dates, zodiac sign, next birthday.",
    "url": "https://udda.tools/en/tools/age-calculator.html",
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "Any",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "inLanguage": ["ar", "en"],
    "isAccessibleForFree": true
  }
  </script>
</head>
<body data-tool-id="age-calculator">
  <div class="app-container">
    <div class="sidebar-overlay"></div>
    
    <aside class="sidebar">
      <div class="sidebar-header">
        <a href="../../en/" class="logo">
          <div class="logo-icon">ğŸ”§</div>
          <span class="logo-text sidebar-text">Udda</span>
        </a>
      </div>
      
      <div class="sidebar-search">
        <div class="search-input-wrapper">
          <input type="text" class="search-input" placeholder="Search for a tool..." aria-label="Search for a tool...">
          <svg class="search-icon" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        
        <a href="../../en/" class="nav-item ">
          <span class="nav-item-icon">ğŸ </span>
          <span class="sidebar-text">Home</span>
        </a>
        <div class="nav-section open">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">ğŸ§®</span>
              <span class="sidebar-text">Calculators</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
            <a href="../../en/tools/percentage.html" class="nav-item ">
              <span class="nav-item-icon">ğŸ”¢</span>
              <span class="sidebar-text">Percentage Calculator</span>
            </a>
            <a href="../../en/tools/interest-calculator.html" class="nav-item ">
              <span class="nav-item-icon">ğŸ’°</span>
              <span class="sidebar-text">Interest Calculator</span>
            </a>
            <a href="../../en/tools/loan-calculator.html" class="nav-item ">
              <span class="nav-item-icon">ğŸ¦</span>
              <span class="sidebar-text">Loan Calculator</span>
            </a>
            <a href="../../en/tools/body-calculator.html" class="nav-item ">
              <span class="nav-item-icon">âš–ï¸</span>
              <span class="sidebar-text">Body Calculator</span>
            </a>
            <a href="../../en/tools/age-calculator.html" class="nav-item active">
              <span class="nav-item-icon">ğŸ‚</span>
              <span class="sidebar-text">Age Calculator</span>
            </a>
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">ğŸ”„</span>
              <span class="sidebar-text">Converters</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">ğŸ“</span>
              <span class="sidebar-text">Text Tools</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">ğŸ“…</span>
              <span class="sidebar-text">Date & Time</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">âš¡</span>
              <span class="sidebar-text">Generators</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">ğŸ–¼ï¸</span>
              <span class="sidebar-text">Image Tools</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">ğŸ’»</span>
              <span class="sidebar-text">Developer Tools</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">ğŸ </span>
              <span class="sidebar-text">Everyday Tools</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
      </nav>
      
      <div class="sidebar-footer">
        <button class="sidebar-toggle" aria-label="Toggle sidebar">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path>
          </svg>
          <span class="sidebar-text">Sidebar</span>
        </button>
      </div>
    </aside>
    
    <div class="main-content">
      <header class="main-header">
        <button class="header-btn mobile-menu-btn" aria-label="Menu">
          <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
        
        <nav class="header-breadcrumb">
          <a href="../../en/" class="breadcrumb-link">Home</a>
          <span class="breadcrumb-separator">â€º</span>
          <a href="../../en/category/calculators.html" class="breadcrumb-link">Calculators</a>
          <span class="breadcrumb-separator">â€º</span>
          <span class="breadcrumb-current">Age Calculator</span>
        </nav>
        
        <div class="header-actions">
          <button class="header-btn" data-favorite-btn aria-label="Add to Favorites">â˜†</button>
          <button class="header-btn" onclick="App.shareUrl('Age Calculator')" aria-label="Share">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
              <polyline points="16 6 12 2 8 6"></polyline>
              <line x1="12" y1="2" x2="12" y2="15"></line>
            </svg>
          </button>
          <button class="header-btn" data-open-settings aria-label="Settings">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
          </button>
        </div>
      </header>
      
      <main class="page-content">
        <style>
/* Age Calculator Styles */
.age-calculator { max-width: 900px; margin: 0 auto; font-family: inherit; }
.age-calculator * { font-family: inherit; }

.calc-tabs { display: flex; gap: 8px; margin-bottom: 24px; flex-wrap: wrap; }
.calc-tab { flex: 1; min-width: 120px; padding: 12px 16px; border: 2px solid var(--border-color); border-radius: 12px; background: var(--bg-secondary); color: var(--text-secondary); font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.2s; text-align: center; }
.calc-tab:hover { border-color: var(--primary); color: var(--primary); }
.calc-tab.active { background: var(--primary); border-color: var(--primary); color: white; }

.calc-section { display: none; }
.calc-section.active { display: block; animation: fadeIn 0.3s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.input-form { background: var(--bg-secondary); border-radius: 16px; padding: 24px; margin-bottom: 24px; }
.form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; margin-bottom: 16px; }
.form-group { display: flex; flex-direction: column; gap: 8px; }
.form-group > label { font-weight: 600; color: var(--text-primary); font-size: 0.9rem; }

/* Dual Date Input */
.dual-date-input { display: flex; flex-direction: column; gap: 8px; }
.date-row { display: flex; align-items: center; gap: 8px; padding: 10px 12px; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 10px; transition: border-color 0.2s; }
.date-row:focus-within { border-color: var(--primary); }
.date-row.hijri { border-color: rgba(34, 197, 94, 0.4); background: rgba(34, 197, 94, 0.05); }
.date-row.hijri:focus-within { border-color: #22c55e; }
.date-row.time-row { border-color: rgba(99, 102, 241, 0.3); background: rgba(99, 102, 241, 0.05); }
.date-row.time-row:focus-within { border-color: var(--primary); }
.date-row.time-row .date-row-label { color: var(--primary); }

.date-row-label { font-size: 0.75rem; font-weight: 700; min-width: 50px; display: flex; align-items: center; gap: 4px; }
.date-row.gregorian .date-row-label { color: var(--primary); }
.date-row.hijri .date-row-label { color: #22c55e; }

.date-fields { display: flex; align-items: center; gap: 4px; flex: 1; }
.date-field { width: 100%; border: none; background: transparent; text-align: center; font-size: 1.05rem; font-weight: 600; color: var(--text-primary); padding: 6px 4px; font-family: inherit; -moz-appearance: textfield; }
.date-field::-webkit-outer-spin-button, .date-field::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
.date-field:focus { outline: none; background: rgba(99, 102, 241, 0.1); border-radius: 4px; }
.date-field::placeholder { color: var(--text-muted); opacity: 0.5; }
.date-field.year { width: 60px; }
.date-field.month, .date-field.day, .date-field.hour, .date-field.minute, .date-field.second { width: 40px; }

.field-group { display: flex; flex-direction: column; align-items: center; gap: 2px; }
.field-label { font-size: 0.65rem; color: var(--text-muted); font-weight: 500; text-transform: uppercase; }

.date-sep, .time-sep { color: var(--text-muted); font-weight: 600; font-size: 0.9rem; }
.date-time-divider { width: 1px; height: 24px; background: var(--border-color); margin: 0 8px; }
.date-picker-btn { background: transparent; border: none; font-size: 1.1rem; cursor: pointer; padding: 4px 8px; border-radius: 6px; transition: background 0.2s; opacity: 0.7; }
.date-picker-btn:hover { background: var(--bg-secondary); opacity: 1; }

/* Select Dropdowns */
.date-select { padding: 6px 8px; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-primary); color: var(--text-primary); font-size: 0.95rem; font-weight: 600; font-family: inherit; cursor: pointer; transition: border-color 0.2s; appearance: none; -webkit-appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236366f1' d='M6 8L2 4h8z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: left 8px center; padding-left: 24px; }
.date-select:focus { outline: none; border-color: var(--primary); }
.date-select:hover { border-color: var(--primary); }
.date-select.month { min-width: 130px; }
.date-select.day, .date-select.hour12, .date-select.minute, .date-select.second { min-width: 60px; }
.date-select.ampm { min-width: 70px; }

/* Year Input */
.date-input.year { width: 75px; padding: 6px 8px; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-primary); color: var(--text-primary); font-size: 0.95rem; font-weight: 600; font-family: inherit; text-align: center; -moz-appearance: textfield; }
.date-input.year::-webkit-outer-spin-button, .date-input.year::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
.date-input.year:focus { outline: none; border-color: var(--primary); }

/* Time Block Row */
.time-block-row { display: flex; align-items: center; gap: 12px; margin-top: 12px; padding: 12px; background: rgba(99, 102, 241, 0.05); border: 2px solid rgba(99, 102, 241, 0.2); border-radius: 10px; flex-wrap: wrap; }
.time-block-row .block-label { color: var(--primary); font-weight: 700; font-size: 0.85rem; }
.time-fields-12 { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }

/* Calendar Popup */
.date-input-container { position: relative; }
.calendar-popup { position: absolute; top: 100%; right: 0; width: 320px; z-index: 1000; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); padding: 16px; display: none; margin-top: 8px; }
.calendar-popup.show { display: block; animation: fadeIn 0.2s ease; }
.calendar-popup.hijri { border-color: rgba(34, 197, 94, 0.4); }

.calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
.calendar-nav { background: transparent; border: none; font-size: 1.2rem; cursor: pointer; padding: 4px 8px; border-radius: 6px; color: var(--text-secondary); }
.calendar-nav:hover { background: var(--bg-secondary); color: var(--primary); }
.calendar-title { font-weight: 700; font-size: 1rem; color: var(--text-primary); }

.calendar-weekdays { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; margin-bottom: 8px; }
.calendar-weekday { text-align: center; font-size: 0.75rem; font-weight: 600; color: var(--text-muted); padding: 4px; }
.calendar-days { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
.calendar-day { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; font-size: 0.85rem; border-radius: 8px; cursor: pointer; transition: all 0.15s; background: transparent; border: none; color: var(--text-primary); }
.calendar-day:hover { background: var(--bg-secondary); }
.calendar-day.other-month { color: var(--text-muted); opacity: 0.5; }
.calendar-day.today { border: 2px solid var(--primary); }
.calendar-day.selected { background: var(--primary); color: white; }
.calendar-popup.hijri .calendar-day.selected { background: #22c55e; }

/* Results */
.result-box { display: none; margin-top: 24px; }
.result-box.show { display: block; animation: fadeIn 0.3s ease; }

.age-main-result { text-align: center; padding: 24px; background: var(--bg-secondary); border-radius: 16px; margin-bottom: 20px; }
.age-big { font-size: 4rem; font-weight: 800; background: linear-gradient(135deg, var(--primary), #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
.age-unit { font-size: 1.5rem; color: var(--text-secondary); margin-right: 8px; }
.age-full { font-size: 1.1rem; color: var(--text-secondary); margin-top: 8px; }
.age-live, .diff-live { margin-top: 16px; padding: 16px 20px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 12px; color: white; font-family: 'Courier New', monospace; font-size: 1.1rem; font-weight: 600; text-align: center; direction: ltr; }

.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 12px; margin: 20px 0; }
.stat-card { background: var(--bg-secondary); border-radius: 12px; padding: 16px; text-align: center; }
.stat-value { font-size: 1.5rem; font-weight: 700; color: var(--primary); }
.stat-label { font-size: 0.8rem; color: var(--text-muted); margin-top: 4px; }

.birthday-info { background: var(--bg-secondary); border-radius: 12px; padding: 16px; margin: 20px 0; }
.birthday-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color); flex-wrap: wrap; gap: 8px; }
.birthday-row:last-child { border-bottom: none; }
.birthday-label { color: var(--text-secondary); }
.birthday-value { font-weight: 600; color: var(--text-primary); }
.birthday-value.highlight { color: var(--primary); }
.birthday-value.hijri { color: #22c55e; }

.zodiac-card { background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1)); border: 1px solid rgba(99, 102, 241, 0.2); border-radius: 12px; padding: 20px; text-align: center; margin: 20px 0; }
.zodiac-icon { font-size: 3rem; margin-bottom: 8px; }
.zodiac-name { font-size: 1.2rem; font-weight: 700; color: var(--primary); }
.zodiac-dates { font-size: 0.85rem; color: var(--text-muted); margin-top: 4px; }

.fun-facts { background: var(--bg-secondary); border-radius: 12px; padding: 20px; }
.fun-facts h3 { margin: 0 0 16px 0; font-size: 1rem; color: var(--text-primary); }
.fact-item { display: flex; align-items: center; gap: 12px; padding: 10px 0; border-bottom: 1px solid var(--border-color); }
.fact-item:last-child { border-bottom: none; }
.fact-icon { font-size: 1.3rem; }
.fact-text { color: var(--text-secondary); font-size: 0.9rem; }

/* New Age Section Styles */
.main-label { font-weight: 700; color: var(--text-primary); font-size: 1rem; display: block; margin-bottom: 12px; }
.compact-date-input { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
.date-block { background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 10px; padding: 12px; }
.date-block.gregorian { border-color: var(--primary); }
.date-block.hijri { border-color: #22c55e; background: rgba(34, 197, 94, 0.05); }
.date-block.time-block { border-color: rgba(99, 102, 241, 0.4); background: rgba(99, 102, 241, 0.05); }
.block-label { display: block; font-size: 0.75rem; font-weight: 700; margin-bottom: 8px; color: var(--text-secondary); }
.date-block.gregorian .block-label { color: var(--primary); }
.date-block.hijri .block-label { color: #22c55e; }
.date-block.time-block .block-label { color: var(--primary); }
.block-fields { display: flex; align-items: flex-end; gap: 4px; justify-content: center; }

/* Age Live Result */
.age-live-result { text-align: center; padding: 24px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 16px; color: white; margin-bottom: 20px; }
.age-years-line { font-size: 3rem; font-weight: 800; display: block; margin-bottom: 8px; }
.age-details-line { font-size: 1.1rem; font-weight: 600; opacity: 0.95; }

/* Birth Info Box */
.birth-info-box { background: var(--bg-secondary); border-radius: 12px; padding: 20px; margin-bottom: 16px; }
.info-line { padding: 12px 0; color: var(--text-secondary); font-size: 1rem; border-bottom: 1px solid var(--border-color); line-height: 1.6; }
.info-line:last-child { border-bottom: none; }
.info-line .label { color: var(--text-muted); font-size: 0.85rem; display: block; margin-bottom: 4px; }
.info-line .value { color: var(--text-primary); font-weight: 600; }
.info-line .value.hijri { color: #22c55e; }
.info-line.highlight { background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1)); margin: 0 -20px; padding: 16px 20px; border-radius: 0; }
.info-line.highlight .value { color: var(--primary); font-size: 1.1rem; }

/* Zodiac Inline */
.zodiac-inline { display: flex; align-items: center; justify-content: center; gap: 12px; padding: 16px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1)); border-radius: 12px; margin-bottom: 16px; }
.zodiac-inline .zodiac-icon { font-size: 2.5rem; }
.zodiac-inline .zodiac-name { font-size: 1.2rem; font-weight: 700; color: var(--primary); }
.zodiac-inline .zodiac-dates { font-size: 0.85rem; color: var(--text-muted); }

/* Fun Facts Text */
.fun-facts-text { background: var(--bg-secondary); border-radius: 12px; padding: 16px 20px; font-size: 0.9rem; color: var(--text-secondary); line-height: 1.8; }

@media (max-width: 768px) {
  .compact-date-input { grid-template-columns: 1fr; }
}

.diff-result { text-align: center; }
.diff-main { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); padding: 20px; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 16px; }

.operation-toggle { display: flex; gap: 8px; }
.op-btn { flex: 1; padding: 12px; border: 2px solid var(--border-color); border-radius: 10px; background: var(--bg-primary); color: var(--text-secondary); font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
.op-btn:hover { border-color: var(--primary); }
.op-btn.active { background: var(--primary); border-color: var(--primary); color: white; }

.add-result { text-align: center; padding: 24px; background: var(--bg-secondary); border-radius: 16px; }
.add-result-date { font-size: 1.5rem; font-weight: 700; color: var(--primary); margin-bottom: 4px; }
.add-result-hijri { font-size: 1.1rem; font-weight: 600; color: #22c55e; margin-bottom: 8px; }
.add-result-time { font-size: 1.1rem; color: var(--text-secondary); }
.add-result-day { font-size: 1rem; color: var(--text-muted); margin-top: 8px; }

.form-group input[type="number"] { padding: 12px 16px; border: 2px solid var(--border-color); border-radius: 10px; background: var(--bg-primary); color: var(--text-primary); font-size: 1rem; font-family: inherit; transition: border-color 0.2s; width: 100%; }
.form-group input[type="number"]:focus { outline: none; border-color: var(--primary); }

@media (max-width: 600px) {
  .form-row { grid-template-columns: 1fr; }
  .date-row { flex-wrap: wrap; gap: 6px; }
  .date-time-divider { display: none; }
  .date-fields { width: 100%; justify-content: center; }
  .age-big { font-size: 3rem; }
  .stats-grid { grid-template-columns: repeat(2, 1fr); }
  .birthday-row { flex-direction: column; gap: 4px; }
}
</style>

<div class="tool-card">
  <div class="tool-header">
    <div class="tool-icon">ğŸ‚</div>
    <div>
      <h1 class="tool-title">Age Calculator</h1>
      <p class="tool-description">Calculate your age in detail and find your zodiac</p>
    </div>
  </div>

  <div class="age-calculator">
    <div class="calc-tabs">
      <button class="calc-tab active" onclick="switchAgeTab('age')">My Age</button>
      <button class="calc-tab" onclick="switchAgeTab('diff')">Date Difference</button>
      <button class="calc-tab" onclick="switchAgeTab('add')">Add/Subtract</button>
    </div>

    <!-- Age Calculator -->
    <div class="calc-section active" id="age-section">
      <div class="input-form">
        <label class="main-label">Birth Date</label>
        <div class="birth-input-row">
          <div class="date-input-container" id="birth-container">
            <div class="compact-date-input">
              <div class="date-block gregorian">
                <span class="block-label">ğŸ“… Gregorian</span>
                <div class="block-fields">
                  <select class="date-select day" id="birth-g-day" onchange="onGregorianChange('birth')"></select>
                  <span class="date-sep">/</span>
                  <select class="date-select month" id="birth-g-month" onchange="updateDays('birth', 'g'); onGregorianChange('birth')"></select>
                  <span class="date-sep">/</span>
                  <input type="number" class="date-input year" id="birth-g-year" placeholder="Year" min="1" max="9999" oninput="updateDays('birth', 'g'); onGregorianChange('birth')">
                  <button type="button" class="date-picker-btn" onclick="toggleCalendar('birth', 'gregorian')">ğŸ“…</button>
                </div>
              </div>
              <div class="date-block hijri">
                <span class="block-label">ğŸŒ™ Hijri</span>
                <div class="block-fields">
                  <select class="date-select day" id="birth-h-day" onchange="onHijriChange('birth')"></select>
                  <span class="date-sep">/</span>
                  <select class="date-select month hijri-month" id="birth-h-month" onchange="updateDays('birth', 'h'); onHijriChange('birth')"></select>
                  <span class="date-sep">/</span>
                  <input type="number" class="date-input year" id="birth-h-year" placeholder="Year" min="1" max="9999" oninput="updateDays('birth', 'h'); onHijriChange('birth')">
                  <button type="button" class="date-picker-btn" onclick="toggleCalendar('birth', 'hijri')">ğŸŒ™</button>
                </div>
              </div>
            </div>
            <div class="time-block-row">
              <span class="block-label">ğŸ• Time</span>
              <div class="time-fields-12">
                <select class="date-select hour12" id="birth-hour12" onchange="calculateAge()"></select>
                <span class="time-sep">:</span>
                <select class="date-select minute" id="birth-minute" onchange="calculateAge()"></select>
                <span class="time-sep">:</span>
                <select class="date-select second" id="birth-second" onchange="calculateAge()"></select>
                <select class="date-select ampm" id="birth-ampm" onchange="calculateAge()">
                  <option value="AM">AM</option>
                  <option value="PM">PM</option>
                </select>
              </div>
            </div>
            <div class="calendar-popup" id="birth-calendar"></div>
          </div>
        </div>
      </div>

      <div class="result-box" id="age-result">
        <div class="age-live-result">
          <span class="age-years-line" id="age-years-text"></span>
          <span class="age-details-line" id="age-details-text"></span>
        </div>
        
        <div class="birth-info-box">
          <div class="info-line">
            <span class="label">ğŸ‚ Born on</span>
            <span class="value" id="born-gregorian"></span>
            <span class="value hijri" id="born-hijri"></span>
          </div>
          <div class="info-line">
            <span class="label">ğŸ Next Birthday</span>
            <span class="value" id="next-birthday-gregorian"></span>
            <span class="value hijri" id="next-birthday-hijri"></span>
          </div>
          <div class="info-line highlight">
            <span class="label" id="days-until-label"></span>
            <span class="value" id="days-until-value"></span>
          </div>
        </div>

        <div class="zodiac-inline">
          <span class="zodiac-icon" id="zodiac-icon">â™ˆ</span>
          <span class="zodiac-name" id="zodiac-name"></span>
          <span class="zodiac-dates" id="zodiac-dates"></span>
        </div>

        <div class="fun-facts-text" id="fun-facts-text"></div>
      </div>
    </div>

    <!-- Date Difference -->
    <div class="calc-section" id="diff-section">
      <div class="input-form">
        <div class="form-row">
          <div class="form-group">
            <label>From Date</label>
            <div class="date-input-container" id="diff-from-container">
              <div class="dual-date-input">
                <div class="date-row gregorian">
                  <span class="date-row-label">Gregorian</span>
                  <div class="date-fields">
                    <div class="field-group"><span class="field-label">Year</span><input type="number" class="date-field year" id="diff-from-g-year" placeholder="YYYY" min="1" max="9999" oninput="validateField(this, 1, 9999); onGregorianChange('diff-from')"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Month</span><input type="number" class="date-field month" id="diff-from-g-month" placeholder="MM" min="1" max="12" oninput="validateField(this, 1, 12); onGregorianChange('diff-from')"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Day</span><input type="number" class="date-field day" id="diff-from-g-day" placeholder="DD" min="1" max="31" oninput="validateField(this, 1, 31); onGregorianChange('diff-from')"></div>
                  </div>
                  <button type="button" class="date-picker-btn" onclick="toggleCalendar('diff-from', 'gregorian')">ğŸ“…</button>
                </div>
                <div class="date-row hijri">
                  <span class="date-row-label">Hijri</span>
                  <div class="date-fields">
                    <div class="field-group"><span class="field-label">Year</span><input type="number" class="date-field year" id="diff-from-h-year" placeholder="YYYY" min="1" max="9999" oninput="validateField(this, 1, 9999); onHijriChange('diff-from')"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Month</span><input type="number" class="date-field month" id="diff-from-h-month" placeholder="MM" min="1" max="12" oninput="validateField(this, 1, 12); onHijriChange('diff-from')"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Day</span><input type="number" class="date-field day" id="diff-from-h-day" placeholder="DD" min="1" max="30" oninput="validateField(this, 1, 30); onHijriChange('diff-from')"></div>
                  </div>
                  <button type="button" class="date-picker-btn" onclick="toggleCalendar('diff-from', 'hijri')">ğŸŒ™</button>
                </div>
                <div class="date-row time-row">
                  <span class="date-row-label">Time</span>
                  <div class="date-fields">
                    <div class="field-group"><span class="field-label">Hour</span><input type="number" class="date-field hour" id="diff-from-hour" placeholder="HH" min="0" max="23" value="0" oninput="validateField(this, 0, 23); calculateDiff()"></div>
                    <span class="time-sep">:</span>
                    <div class="field-group"><span class="field-label">Min</span><input type="number" class="date-field minute" id="diff-from-minute" placeholder="MM" min="0" max="59" value="0" oninput="validateField(this, 0, 59); calculateDiff()"></div>
                    <span class="time-sep">:</span>
                    <div class="field-group"><span class="field-label">Sec</span><input type="number" class="date-field second" id="diff-from-second" placeholder="SS" min="0" max="59" value="0" oninput="validateField(this, 0, 59); calculateDiff()"></div>
                  </div>
                  <button type="button" class="date-picker-btn" onclick="toggleTimePicker('diff-from')">ğŸ•</button>
                </div>
              </div>
              <div class="calendar-popup" id="diff-from-calendar"></div>
              <div class="time-picker-popup" id="diff-from-time-picker"></div>
            </div>
          </div>
          <div class="form-group">
            <label>To Date</label>
            <div class="date-input-container" id="diff-to-container">
              <div class="dual-date-input">
                <div class="date-row gregorian">
                  <span class="date-row-label">Gregorian</span>
                  <div class="date-fields">
                    <div class="field-group"><span class="field-label">Year</span><input type="number" class="date-field year" id="diff-to-g-year" placeholder="YYYY" min="1" max="9999" oninput="validateField(this, 1, 9999); onGregorianChange('diff-to'); stopDiffAutoMode()"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Month</span><input type="number" class="date-field month" id="diff-to-g-month" placeholder="MM" min="1" max="12" oninput="validateField(this, 1, 12); onGregorianChange('diff-to'); stopDiffAutoMode()"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Day</span><input type="number" class="date-field day" id="diff-to-g-day" placeholder="DD" min="1" max="31" oninput="validateField(this, 1, 31); onGregorianChange('diff-to'); stopDiffAutoMode()"></div>
                  </div>
                  <button type="button" class="date-picker-btn" onclick="toggleCalendar('diff-to', 'gregorian'); stopDiffAutoMode()">ğŸ“…</button>
                </div>
                <div class="date-row hijri">
                  <span class="date-row-label">Hijri</span>
                  <div class="date-fields">
                    <div class="field-group"><span class="field-label">Year</span><input type="number" class="date-field year" id="diff-to-h-year" placeholder="YYYY" min="1" max="9999" oninput="validateField(this, 1, 9999); onHijriChange('diff-to'); stopDiffAutoMode()"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Month</span><input type="number" class="date-field month" id="diff-to-h-month" placeholder="MM" min="1" max="12" oninput="validateField(this, 1, 12); onHijriChange('diff-to'); stopDiffAutoMode()"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Day</span><input type="number" class="date-field day" id="diff-to-h-day" placeholder="DD" min="1" max="30" oninput="validateField(this, 1, 30); onHijriChange('diff-to'); stopDiffAutoMode()"></div>
                  </div>
                  <button type="button" class="date-picker-btn" onclick="toggleCalendar('diff-to', 'hijri'); stopDiffAutoMode()">ğŸŒ™</button>
                </div>
                <div class="date-row time-row">
                  <span class="date-row-label">Time</span>
                  <div class="date-fields">
                    <div class="field-group"><span class="field-label">Hour</span><input type="number" class="date-field hour" id="diff-to-hour" placeholder="HH" min="0" max="23" oninput="validateField(this, 0, 23); stopDiffAutoMode(); calculateDiff()"></div>
                    <span class="time-sep">:</span>
                    <div class="field-group"><span class="field-label">Min</span><input type="number" class="date-field minute" id="diff-to-minute" placeholder="MM" min="0" max="59" oninput="validateField(this, 0, 59); stopDiffAutoMode(); calculateDiff()"></div>
                    <span class="time-sep">:</span>
                    <div class="field-group"><span class="field-label">Sec</span><input type="number" class="date-field second" id="diff-to-second" placeholder="SS" min="0" max="59" oninput="validateField(this, 0, 59); stopDiffAutoMode(); calculateDiff()"></div>
                  </div>
                  <button type="button" class="date-picker-btn" onclick="setNowTime('diff-to'); stopDiffAutoMode()">â±ï¸</button>
                </div>
              </div>
              <div class="calendar-popup" id="diff-to-calendar"></div>
              <div class="time-picker-popup" id="diff-to-time-picker"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="result-box" id="diff-result">
        <div class="diff-result">
          <div class="diff-main" id="diff-main"></div>
          <div class="diff-live" id="diff-live"></div>
          <div class="stats-grid">
            <div class="stat-card"><div class="stat-value" id="diff-months">0</div><div class="stat-label">Months</div></div>
            <div class="stat-card"><div class="stat-value" id="diff-weeks">0</div><div class="stat-label">Weeks</div></div>
            <div class="stat-card"><div class="stat-value" id="diff-days">0</div><div class="stat-label">Days</div></div>
            <div class="stat-card"><div class="stat-value" id="diff-hours">0</div><div class="stat-label">Hours</div></div>
            <div class="stat-card"><div class="stat-value" id="diff-minutes">0</div><div class="stat-label">Minutes</div></div>
            <div class="stat-card"><div class="stat-value" id="diff-seconds">0</div><div class="stat-label">Seconds</div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Add/Subtract -->
    <div class="calc-section" id="add-section">
      <div class="input-form">
        <div class="form-group" style="margin-bottom: 16px">
          <label>Operation</label>
          <div class="operation-toggle">
            <button class="op-btn active" onclick="setOperation('add', this)">+ Add</button>
            <button class="op-btn" onclick="setOperation('subtract', this)">âˆ’ Subtract</button>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Start Date</label>
            <div class="date-input-container" id="add-container">
              <div class="dual-date-input">
                <div class="date-row gregorian">
                  <span class="date-row-label">Gregorian</span>
                  <div class="date-fields">
                    <div class="field-group"><span class="field-label">Year</span><input type="number" class="date-field year" id="add-g-year" placeholder="YYYY" min="1" max="9999" oninput="validateField(this, 1, 9999); onGregorianChange('add')"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Month</span><input type="number" class="date-field month" id="add-g-month" placeholder="MM" min="1" max="12" oninput="validateField(this, 1, 12); onGregorianChange('add')"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Day</span><input type="number" class="date-field day" id="add-g-day" placeholder="DD" min="1" max="31" oninput="validateField(this, 1, 31); onGregorianChange('add')"></div>
                  </div>
                  <button type="button" class="date-picker-btn" onclick="toggleCalendar('add', 'gregorian')">ğŸ“…</button>
                </div>
                <div class="date-row hijri">
                  <span class="date-row-label">Hijri</span>
                  <div class="date-fields">
                    <div class="field-group"><span class="field-label">Year</span><input type="number" class="date-field year" id="add-h-year" placeholder="YYYY" min="1" max="9999" oninput="validateField(this, 1, 9999); onHijriChange('add')"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Month</span><input type="number" class="date-field month" id="add-h-month" placeholder="MM" min="1" max="12" oninput="validateField(this, 1, 12); onHijriChange('add')"></div>
                    <span class="date-sep">/</span>
                    <div class="field-group"><span class="field-label">Day</span><input type="number" class="date-field day" id="add-h-day" placeholder="DD" min="1" max="30" oninput="validateField(this, 1, 30); onHijriChange('add')"></div>
                  </div>
                  <button type="button" class="date-picker-btn" onclick="toggleCalendar('add', 'hijri')">ğŸŒ™</button>
                </div>
                <div class="date-row time-row">
                  <span class="date-row-label">Time</span>
                  <div class="date-fields">
                    <div class="field-group"><span class="field-label">Hour</span><input type="number" class="date-field hour" id="add-hour" placeholder="HH" min="0" max="23" oninput="validateField(this, 0, 23); calculateAdd()"></div>
                    <span class="time-sep">:</span>
                    <div class="field-group"><span class="field-label">Min</span><input type="number" class="date-field minute" id="add-minute" placeholder="MM" min="0" max="59" oninput="validateField(this, 0, 59); calculateAdd()"></div>
                    <span class="time-sep">:</span>
                    <div class="field-group"><span class="field-label">Sec</span><input type="number" class="date-field second" id="add-second" placeholder="SS" min="0" max="59" oninput="validateField(this, 0, 59); calculateAdd()"></div>
                  </div>
                  <button type="button" class="date-picker-btn" onclick="setNowTime('add')">â±ï¸</button>
                </div>
              </div>
              <div class="calendar-popup" id="add-calendar"></div>
              <div class="time-picker-popup" id="add-time-picker"></div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Years</label><input type="number" id="add-years" placeholder="0" oninput="calculateAdd()"></div>
          <div class="form-group"><label>Months</label><input type="number" id="add-months" placeholder="0" oninput="calculateAdd()"></div>
          <div class="form-group"><label>Days</label><input type="number" id="add-days" placeholder="0" oninput="calculateAdd()"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Hours</label><input type="number" id="add-hours" placeholder="0" oninput="calculateAdd()"></div>
          <div class="form-group"><label>Minutes</label><input type="number" id="add-minutes" placeholder="0" oninput="calculateAdd()"></div>
          <div class="form-group"><label>Seconds</label><input type="number" id="add-seconds" placeholder="0" oninput="calculateAdd()"></div>
        </div>
      </div>
      <div class="result-box" id="add-result">
        <div class="add-result">
          <div class="add-result-date" id="add-result-date"></div>
          <div class="add-result-hijri" id="add-result-hijri"></div>
          <div class="add-result-time" id="add-result-time"></div>
          <div class="add-result-day" id="add-result-day"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const isArabic = document.documentElement.lang === 'ar';
let currentOperation = 'add';
let ageAutoInterval = null;
let diffAutoInterval = null;
let openCalendar = null;

const dayNames = isArabic ? ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'] : ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
const dayNamesShort = isArabic ? ['Ø£Ø­Ø¯', 'Ø¥Ø«Ù†', 'Ø«Ù„Ø§', 'Ø£Ø±Ø¨', 'Ø®Ù…ÙŠ', 'Ø¬Ù…Ø¹', 'Ø³Ø¨Øª'] : ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
const monthNames = isArabic ? ['ÙŠÙ†Ø§ÙŠØ±', 'ÙØ¨Ø±Ø§ÙŠØ±', 'Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ', 'ÙŠÙˆÙ†ÙŠÙˆ', 'ÙŠÙˆÙ„ÙŠÙˆ', 'Ø£ØºØ³Ø·Ø³', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'] : ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
const hijriMonthNames = isArabic ? ['Ù…Ø­Ø±Ù…', 'ØµÙØ±', 'Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ„', 'Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ', 'Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø£ÙˆÙ„Ù‰', 'Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø¢Ø®Ø±Ø©', 'Ø±Ø¬Ø¨', 'Ø´Ø¹Ø¨Ø§Ù†', 'Ø±Ù…Ø¶Ø§Ù†', 'Ø´ÙˆØ§Ù„', 'Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©', 'Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©'] : ['Muharram', 'Safar', 'Rabi I', 'Rabi II', 'Jumada I', 'Jumada II', 'Rajab', 'Shaban', 'Ramadan', 'Shawwal', 'Dhul Qadah', 'Dhul Hijjah'];

// Hijri Conversion
function gregorianToHijri(y, m, d) { const jd = gToJ(y, m, d); return jToH(jd); }
function hijriToGregorian(y, m, d) { const jd = hToJ(y, m, d); return jToG(jd); }
function gToJ(y, m, d) { if (m <= 2) { y--; m += 12; } const A = Math.floor(y / 100); const B = 2 - A + Math.floor(A / 4); return Math.floor(365.25 * (y + 4716)) + Math.floor(30.6001 * (m + 1)) + d + B - 1524.5; }
function jToG(jd) { const Z = Math.floor(jd + 0.5); const A = Math.floor((Z - 1867216.25) / 36524.25); const B = Z + 1 + A - Math.floor(A / 4); const C = B + 1524; const D = Math.floor((C - 122.1) / 365.25); const E = Math.floor(365.25 * D); const F = Math.floor((C - E) / 30.6001); const day = C - E - Math.floor(30.6001 * F); const month = F <= 13 ? F - 1 : F - 13; const year = month <= 2 ? D - 4715 : D - 4716; return { year, month, day }; }
function jToH(jd) { jd = Math.floor(jd) + 0.5; const y = Math.floor((30 * (jd - 1948439.5) + 10646) / 10631); const m = Math.min(12, Math.ceil((jd - 29 - hToJ(y, 1, 1)) / 29.5) + 1); const d = Math.floor(jd - hToJ(y, m, 1)) + 1; return { year: y, month: m, day: Math.min(d, 30) }; }
function hToJ(y, m, d) { return Math.floor((11 * y + 3) / 30) + 354 * y + 30 * m - Math.floor((m - 1) / 2) + d + 1948440 - 385; }
function formatHijri(h) { if (!h || !h.year) return ''; return isArabic ? `${h.day} ${hijriMonthNames[h.month - 1]} ${h.year} Ù‡Ù€` : `${h.day} ${hijriMonthNames[h.month - 1]} ${h.year} AH`; }
function getDaysInGMonth(y, m) { return new Date(y, m, 0).getDate(); }
function getDaysInHMonth(y, m) { if (m % 2 === 1) return 30; if (m === 12 && [2,5,7,10,13,16,18,21,24,26,29].includes(y % 30)) return 30; return 29; }

// Validation
function validateField(input, min, max) {
  let v = parseInt(input.value);
  if (isNaN(v)) return;
  if (v < min) input.value = min;
  if (v > max) input.value = max;
}

// Set Now Time
function setNowTime(prefix) {
  const now = new Date();
  setDateTimeFromDate(prefix, now);
  if (prefix === 'calc') { startAgeAutoMode(); calculateAge(); }
  else if (prefix === 'diff-to') { startDiffAutoMode(); calculateDiff(); }
  else if (prefix === 'add') calculateAdd();
}

// Time Picker (set current time)
function toggleTimePicker(prefix) {
  const now = new Date();
  setTime(prefix, now.getHours(), now.getMinutes(), now.getSeconds());
  if (prefix === 'birth') calculateAge();
  else if (prefix.startsWith('diff')) calculateDiff();
  else if (prefix === 'add') calculateAdd();
}

// Date Input Helpers
function getVal(id) { return parseInt(document.getElementById(id)?.value) || 0; }
function setVal(id, v) { const el = document.getElementById(id); if (el) el.value = v; }
function getDateValues(p) { 
  const gY = getVal(`${p}-g-year`), gM = getVal(`${p}-g-month`), gD = getVal(`${p}-g-day`);
  const hY = getVal(`${p}-h-year`), hM = getVal(`${p}-h-month`), hD = getVal(`${p}-h-day`);
  let hr, mn, sc;
  // Check if 12-hour format (for birth)
  const hour12El = document.getElementById(`${p}-hour12`);
  if (hour12El) {
    const h12 = getVal(`${p}-hour12`);
    const ampm = document.getElementById(`${p}-ampm`)?.value || 'AM';
    hr = ampm === 'PM' ? (h12 === 12 ? 12 : h12 + 12) : (h12 === 12 ? 0 : h12);
    mn = getVal(`${p}-minute`);
    sc = getVal(`${p}-second`);
  } else {
    hr = getVal(`${p}-hour`);
    mn = getVal(`${p}-minute`);
    sc = getVal(`${p}-second`);
  }
  return { gY, gM, gD, hY, hM, hD, hr, mn, sc }; 
}
function setGregorian(p, y, m, d) { setVal(`${p}-g-year`, y); setVal(`${p}-g-month`, m); setVal(`${p}-g-day`, d); }
function setHijri(p, y, m, d) { setVal(`${p}-h-year`, y); setVal(`${p}-h-month`, m); setVal(`${p}-h-day`, d); }
function setTime(p, h, m, s) { setVal(`${p}-hour`, h); setVal(`${p}-minute`, m); setVal(`${p}-second`, s); }

function onGregorianChange(p) { const v = getDateValues(p); if (v.gY >= 1 && v.gM >= 1 && v.gM <= 12 && v.gD >= 1 && v.gD <= 31) { const h = gregorianToHijri(v.gY, v.gM, v.gD); setHijri(p, h.year, h.month, h.day); } triggerCalc(p); }
function onHijriChange(p) { const v = getDateValues(p); if (v.hY >= 1 && v.hM >= 1 && v.hM <= 12 && v.hD >= 1 && v.hD <= 30) { const g = hijriToGregorian(v.hY, v.hM, v.hD); setGregorian(p, g.year, g.month, g.day); } triggerCalc(p); }
function triggerCalc(p) { if (p === 'birth') { startAgeAutoMode(); calculateAge(); } else if (p.startsWith('diff')) calculateDiff(); else if (p === 'add') calculateAdd(); }

function getDateTime(p) { const v = getDateValues(p); if (v.gY < 1 || v.gM < 1 || v.gD < 1) return null; return new Date(v.gY, v.gM - 1, v.gD, v.hr, v.mn, v.sc); }
function setDateTimeFromDate(p, d) { setGregorian(p, d.getFullYear(), d.getMonth() + 1, d.getDate()); setTime(p, d.getHours(), d.getMinutes(), d.getSeconds()); const h = gregorianToHijri(d.getFullYear(), d.getMonth() + 1, d.getDate()); setHijri(p, h.year, h.month, h.day); }

// Calendar
function toggleCalendar(p, t) { const id = `${p}-calendar`; const cal = document.getElementById(id); if (openCalendar && openCalendar !== id) document.getElementById(openCalendar)?.classList.remove('show'); if (cal.classList.contains('show')) { cal.classList.remove('show'); openCalendar = null; } else { renderCalendar(p, t); cal.classList.add('show'); cal.classList.toggle('hijri', t === 'hijri'); openCalendar = id; } }
function renderCalendar(p, t) { 
  const cal = document.getElementById(`${p}-calendar`); 
  const v = getDateValues(p); 
  let y, m, selD; 
  if (t === 'gregorian') { 
    y = v.gY || new Date().getFullYear(); 
    m = v.gM || (new Date().getMonth() + 1); 
    selD = v.gD; 
  } else { 
    const now = new Date(); 
    const nh = gregorianToHijri(now.getFullYear(), now.getMonth() + 1, now.getDate()); 
    y = v.hY || nh.year; 
    m = v.hM || nh.month; 
    selD = v.hD; 
  }
  // Store current calendar state
  cal.dataset.year = y;
  cal.dataset.month = m;
  cal.dataset.type = t;
  cal.dataset.prefix = p;
  
  const mName = t === 'gregorian' ? monthNames[m - 1] : hijriMonthNames[m - 1]; 
  const days = t === 'gregorian' ? getDaysInGMonth(y, m) : getDaysInHMonth(y, m); 
  let fdow; 
  if (t === 'gregorian') fdow = new Date(y, m - 1, 1).getDay(); 
  else { const g = hijriToGregorian(y, m, 1); fdow = new Date(g.year, g.month - 1, g.day).getDay(); }
  
  const now = new Date(); 
  const tG = { y: now.getFullYear(), m: now.getMonth() + 1, d: now.getDate() }; 
  const tH = gregorianToHijri(tG.y, tG.m, tG.d);
  
  let html = `
    <div class="calendar-header">
      <button type="button" class="calendar-nav" onclick="chgYear('${p}','${t}',-1)">Â«</button>
      <button type="button" class="calendar-nav" onclick="chgMonth('${p}','${t}',-1)">â€¹</button>
      <span class="calendar-title">${mName} ${y}</span>
      <button type="button" class="calendar-nav" onclick="chgMonth('${p}','${t}',1)">â€º</button>
      <button type="button" class="calendar-nav" onclick="chgYear('${p}','${t}',1)">Â»</button>
    </div>
    <div class="calendar-weekdays">${dayNamesShort.map(d => `<span class="calendar-weekday">${d}</span>`).join('')}</div>
    <div class="calendar-days">`;
  
  for (let i = 0; i < fdow; i++) html += `<button class="calendar-day other-month" disabled></button>`;
  for (let d = 1; d <= days; d++) { 
    let cls = 'calendar-day'; 
    if (t === 'gregorian') { if (y === tG.y && m === tG.m && d === tG.d) cls += ' today'; } 
    else { if (y === tH.year && m === tH.month && d === tH.day) cls += ' today'; } 
    if (d === selD) cls += ' selected'; 
    html += `<button type="button" class="${cls}" onclick="selDay('${p}','${t}',${y},${m},${d})">${d}</button>`; 
  }
  html += '</div>'; 
  cal.innerHTML = html; 
}

function chgYear(p, t, delta) {
  const cal = document.getElementById(`${p}-calendar`);
  let y = parseInt(cal.dataset.year) || new Date().getFullYear();
  let m = parseInt(cal.dataset.month) || 1;
  y += delta;
  cal.dataset.year = y;
  renderCalendarDirect(p, t, y, m);
}

function chgMonth(p, t, delta) { 
  const cal = document.getElementById(`${p}-calendar`);
  let y = parseInt(cal.dataset.year) || new Date().getFullYear();
  let m = parseInt(cal.dataset.month) || 1;
  m += delta; 
  if (m > 12) { m = 1; y++; } 
  if (m < 1) { m = 12; y--; } 
  cal.dataset.year = y;
  cal.dataset.month = m;
  renderCalendarDirect(p, t, y, m);
}

function renderCalendarDirect(p, t, y, m) {
  const cal = document.getElementById(`${p}-calendar`);
  const v = getDateValues(p);
  let selD = t === 'gregorian' ? v.gD : v.hD;
  
  const mName = t === 'gregorian' ? monthNames[m - 1] : hijriMonthNames[m - 1]; 
  const days = t === 'gregorian' ? getDaysInGMonth(y, m) : getDaysInHMonth(y, m); 
  let fdow; 
  if (t === 'gregorian') fdow = new Date(y, m - 1, 1).getDay(); 
  else { const g = hijriToGregorian(y, m, 1); fdow = new Date(g.year, g.month - 1, g.day).getDay(); }
  
  const now = new Date(); 
  const tG = { y: now.getFullYear(), m: now.getMonth() + 1, d: now.getDate() }; 
  const tH = gregorianToHijri(tG.y, tG.m, tG.d);
  
  let html = `
    <div class="calendar-header">
      <button type="button" class="calendar-nav" onclick="chgYear('${p}','${t}',-1)">Â«</button>
      <button type="button" class="calendar-nav" onclick="chgMonth('${p}','${t}',-1)">â€¹</button>
      <span class="calendar-title">${mName} ${y}</span>
      <button type="button" class="calendar-nav" onclick="chgMonth('${p}','${t}',1)">â€º</button>
      <button type="button" class="calendar-nav" onclick="chgYear('${p}','${t}',1)">Â»</button>
    </div>
    <div class="calendar-weekdays">${dayNamesShort.map(d => `<span class="calendar-weekday">${d}</span>`).join('')}</div>
    <div class="calendar-days">`;
  
  for (let i = 0; i < fdow; i++) html += `<button class="calendar-day other-month" disabled></button>`;
  for (let d = 1; d <= days; d++) { 
    let cls = 'calendar-day'; 
    if (t === 'gregorian') { if (y === tG.y && m === tG.m && d === tG.d) cls += ' today'; } 
    else { if (y === tH.year && m === tH.month && d === tH.day) cls += ' today'; } 
    if (d === selD) cls += ' selected'; 
    html += `<button type="button" class="${cls}" onclick="selDay('${p}','${t}',${y},${m},${d})">${d}</button>`; 
  }
  html += '</div>'; 
  cal.innerHTML = html;
}

function selDay(p, t, y, m, d) { 
  if (t === 'gregorian') { 
    setGregorian(p, y, m, d); 
    const h = gregorianToHijri(y, m, d); 
    setHijri(p, h.year, h.month, h.day); 
  } else { 
    setHijri(p, y, m, d); 
    const g = hijriToGregorian(y, m, d); 
    setGregorian(p, g.year, g.month, g.day); 
  } 
  closeCalendar();
  triggerCalc(p); 
}

function closeCalendar() {
  if (openCalendar) {
    document.getElementById(openCalendar)?.classList.remove('show'); 
    openCalendar = null;
  }
}

document.addEventListener('mousedown', e => { 
  if (openCalendar) {
    const calEl = document.getElementById(openCalendar);
    const clickedInside = calEl && calEl.contains(e.target);
    const clickedBtn = e.target.closest('.date-picker-btn');
    if (!clickedInside && !clickedBtn) {
      closeCalendar();
    }
  }
});

// Tabs & Operation
function switchAgeTab(tab) { document.querySelectorAll('.calc-tab').forEach(t => t.classList.remove('active')); document.querySelectorAll('.calc-section').forEach(s => s.classList.remove('active')); document.querySelectorAll('.calc-tab').forEach(t => { if (t.getAttribute('onclick')?.includes(`'${tab}'`)) t.classList.add('active'); }); document.getElementById(`${tab}-section`).classList.add('active'); }
function setOperation(op, btn) { currentOperation = op; document.querySelectorAll('.op-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); calculateAdd(); }

// Auto Mode
function stopAutoMode() { if (ageAutoInterval) { clearInterval(ageAutoInterval); ageAutoInterval = null; } }
function startDiffAutoMode() { if (diffAutoInterval) return; const fd = getDateTime('diff-from'); if (!fd) return; diffAutoInterval = setInterval(() => { const now = new Date(); setDateTimeFromDate('diff-to', now); calculateDiff(); }, 1000); }
function stopDiffAutoMode() { if (diffAutoInterval) { clearInterval(diffAutoInterval); diffAutoInterval = null; } }

// Age Calculator
function calculateAge() { 
  const bd = getDateTime('birth');
  if (!bd) { document.getElementById('age-result').classList.remove('show'); return; }
  
  const td = new Date(); // Always calculate to NOW
  
  let yrs = td.getFullYear() - bd.getFullYear(), mos = td.getMonth() - bd.getMonth(), dys = td.getDate() - bd.getDate(); 
  if (dys < 0) { mos--; dys += new Date(td.getFullYear(), td.getMonth(), 0).getDate(); } 
  if (mos < 0) { yrs--; mos += 12; }
  
  let hrs = td.getHours() - bd.getHours(), mns = td.getMinutes() - bd.getMinutes(), scs = td.getSeconds() - bd.getSeconds(); 
  if (scs < 0) { mns--; scs += 60; } 
  if (mns < 0) { hrs--; mns += 60; } 
  if (hrs < 0) { dys--; hrs += 24; if (dys < 0) { mos--; dys += 30; } if (mos < 0) { yrs--; mos += 12; } }
  
  // Live result - years on one line, details on another
  const yearsText = isArabic ? `${yrs} Ø³Ù†Ø©` : `${yrs} years`;
  const detailsText = isArabic ? 
    `Ùˆ ${mos} Ø´Ù‡Ø± Ùˆ ${dys} ÙŠÙˆÙ… Ùˆ ${hrs} Ø³Ø§Ø¹Ø© Ùˆ ${mns} Ø¯Ù‚ÙŠÙ‚Ø© Ùˆ ${scs} Ø«Ø§Ù†ÙŠØ©` : 
    `${mos} months, ${dys} days, ${hrs} hours, ${mns} minutes, ${scs} seconds`;
  document.getElementById('age-years-text').textContent = yearsText;
  document.getElementById('age-details-text').textContent = detailsText;
  
  // Birth date
  const hBd = gregorianToHijri(bd.getFullYear(), bd.getMonth() + 1, bd.getDate());
  document.getElementById('born-gregorian').textContent = isArabic ? 
    `${dayNames[bd.getDay()]}ØŒ ${bd.getDate()} ${monthNames[bd.getMonth()]} ${bd.getFullYear()}` :
    `${dayNames[bd.getDay()]}, ${monthNames[bd.getMonth()]} ${bd.getDate()}, ${bd.getFullYear()}`;
  document.getElementById('born-hijri').textContent = isArabic ?
    `Ø§Ù„Ù…ÙˆØ§ÙÙ‚ Ù„Ù€ ${hBd.day} ${hijriMonthNames[hBd.month - 1]} ${hBd.year} Ù‡Ù€` :
    `(${hBd.day} ${hijriMonthNames[hBd.month - 1]} ${hBd.year} AH)`;
  
  // Next birthday
  let nb = new Date(td.getFullYear(), bd.getMonth(), bd.getDate()); 
  if (nb <= td) nb.setFullYear(nb.getFullYear() + 1);
  const hNb = gregorianToHijri(nb.getFullYear(), nb.getMonth() + 1, nb.getDate());
  document.getElementById('next-birthday-gregorian').textContent = isArabic ?
    `${dayNames[nb.getDay()]}ØŒ ${nb.getDate()} ${monthNames[nb.getMonth()]} ${nb.getFullYear()}` :
    `${dayNames[nb.getDay()]}, ${monthNames[nb.getMonth()]} ${nb.getDate()}, ${nb.getFullYear()}`;
  document.getElementById('next-birthday-hijri').textContent = isArabic ?
    `Ø§Ù„Ù…ÙˆØ§ÙÙ‚ Ù„Ù€ ${hNb.day} ${hijriMonthNames[hNb.month - 1]} ${hNb.year} Ù‡Ù€` :
    `(${hNb.day} ${hijriMonthNames[hNb.month - 1]} ${hNb.year} AH)`;
  
  // Days until birthday
  const daysUntil = Math.ceil((nb - td) / 864e5), nextAge = yrs + 1;
  if (daysUntil === 0 || (td.getMonth() === bd.getMonth() && td.getDate() === bd.getDate())) {
    document.getElementById('days-until-label').textContent = isArabic ? 'ğŸ‰ Ø§Ù„ÙŠÙˆÙ… Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ!' : 'ğŸ‰ Today is your birthday!';
    document.getElementById('days-until-value').textContent = isArabic ? 'ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†Øª Ø¨Ø®ÙŠØ±!' : 'Happy Birthday!';
  } else {
    document.getElementById('days-until-label').textContent = isArabic ? 
      `â³ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø­ØªÙ‰ Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ Ø§Ù„Ù€ ${nextAge}` :
      `â³ Days until birthday #${nextAge}`;
    document.getElementById('days-until-value').textContent = isArabic ? `${daysUntil} ÙŠÙˆÙ…` : `${daysUntil} days`;
  }
  
  // Zodiac
  updateZodiac(bd.getMonth() + 1, bd.getDate());
  
  // Fun facts in one paragraph
  const diffMs = td - bd, totD = Math.floor(diffMs / 864e5), totH = Math.floor(diffMs / 36e5);
  const hb = totD * 100000, br = totD * 20000, sl = Math.floor(totH / 3), slDays = Math.floor(sl / 24), fm = Math.floor(totD / 29.5);
  const funText = isArabic ?
    `ğŸ’“ Ù„Ù‚Ø¯ Ù†Ø¨Ø¶ Ù‚Ù„Ø¨Ùƒ Ø­ÙˆØ§Ù„ÙŠ ${hb.toLocaleString()} Ù†Ø¨Ø¶Ø©ØŒ ğŸŒ¬ï¸ ÙˆØªÙ†ÙØ³Øª Ø£ÙƒØ«Ø± Ù…Ù† ${br.toLocaleString()} Ù…Ø±Ø©ØŒ ğŸ˜´ ÙˆÙ†Ù…Øª ${sl.toLocaleString()} Ø³Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ (Ø¨Ù…Ø§ ÙŠØ¹Ø§Ø¯Ù„ ${slDays.toLocaleString()} ÙŠÙˆÙ…Ø§Ù‹ Ù…Ù† Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ù…Ø³ØªÙ…Ø± ğŸ˜…)ØŒ ğŸŒ• ÙˆØ´Ù‡Ø¯Øª ${fm.toLocaleString()} Ø¨Ø¯Ø±Ø§Ù‹.` :
    `ğŸ’“ Your heart has beaten ~${hb.toLocaleString()} times, ğŸŒ¬ï¸ you've breathed ${br.toLocaleString()}+ times, ğŸ˜´ slept ~${sl.toLocaleString()} hours (that's ${slDays.toLocaleString()} days of continuous sleep! ğŸ˜…), ğŸŒ• and witnessed ${fm.toLocaleString()} full moons.`;
  document.getElementById('fun-facts-text').textContent = funText;
  
  document.getElementById('age-result').classList.add('show');
}

// Start age auto update
function startAgeAutoMode() {
  if (ageAutoInterval) return;
  ageAutoInterval = setInterval(() => { calculateAge(); }, 1000);
}

// Diff Calculator
function calculateDiff() { const fd = getDateTime('diff-from'), td = getDateTime('diff-to'); if (!fd || !td) { document.getElementById('diff-result').classList.remove('show'); return; }
const diffMs = Math.abs(td - fd), totS = Math.floor(diffMs / 1000), totMn = Math.floor(totS / 60), totH = Math.floor(totMn / 60), totD = Math.floor(totH / 24), totW = Math.floor(totD / 7), totMo = Math.floor(totD / 30.44);
const st = fd < td ? fd : td, en = fd < td ? td : fd; let yrs = en.getFullYear() - st.getFullYear(), mos = en.getMonth() - st.getMonth(), dys = en.getDate() - st.getDate(); if (dys < 0) { mos--; dys += new Date(en.getFullYear(), en.getMonth(), 0).getDate(); } if (mos < 0) { yrs--; mos += 12; }
document.getElementById('diff-main').textContent = isArabic ? `${yrs} Ø³Ù†Ø© Ùˆ ${mos} Ø´Ù‡Ø± Ùˆ ${dys} ÙŠÙˆÙ…` : `${yrs} years, ${mos} months, ${dys} days`;
const hrs = totH % 24, mns = totMn % 60, scs = totS % 60; document.getElementById('diff-live').textContent = isArabic ? `${totD} ÙŠÙˆÙ… ${hrs} Ø³Ø§Ø¹Ø© ${mns} Ø¯Ù‚ÙŠÙ‚Ø© ${scs} Ø«Ø§Ù†ÙŠØ©` : `${totD}d ${hrs}h ${mns}m ${scs}s`;
document.getElementById('diff-months').textContent = totMo.toLocaleString(); document.getElementById('diff-weeks').textContent = totW.toLocaleString(); document.getElementById('diff-days').textContent = totD.toLocaleString(); document.getElementById('diff-hours').textContent = totH.toLocaleString(); document.getElementById('diff-minutes').textContent = totMn.toLocaleString(); document.getElementById('diff-seconds').textContent = totS.toLocaleString(); document.getElementById('diff-result').classList.add('show'); }

// Add Calculator
function calculateAdd() { const sd = getDateTime('add'); if (!sd) { document.getElementById('add-result').classList.remove('show'); return; }
const aY = getVal('add-years'), aM = getVal('add-months'), aD = getVal('add-days'), aH = getVal('add-hours'), aMn = getVal('add-minutes'), aS = getVal('add-seconds'); const r = new Date(sd);
if (currentOperation === 'add') { r.setFullYear(r.getFullYear() + aY); r.setMonth(r.getMonth() + aM); r.setDate(r.getDate() + aD); r.setHours(r.getHours() + aH); r.setMinutes(r.getMinutes() + aMn); r.setSeconds(r.getSeconds() + aS); } else { r.setFullYear(r.getFullYear() - aY); r.setMonth(r.getMonth() - aM); r.setDate(r.getDate() - aD); r.setHours(r.getHours() - aH); r.setMinutes(r.getMinutes() - aMn); r.setSeconds(r.getSeconds() - aS); }
document.getElementById('add-result-date').textContent = isArabic ? `${r.getDate()} ${monthNames[r.getMonth()]} ${r.getFullYear()}` : `${monthNames[r.getMonth()]} ${r.getDate()}, ${r.getFullYear()}`;
const hR = gregorianToHijri(r.getFullYear(), r.getMonth() + 1, r.getDate()); document.getElementById('add-result-hijri').textContent = formatHijri(hR);
document.getElementById('add-result-time').textContent = `${String(r.getHours()).padStart(2, '0')}:${String(r.getMinutes()).padStart(2, '0')}:${String(r.getSeconds()).padStart(2, '0')}`; document.getElementById('add-result-day').textContent = dayNames[r.getDay()]; document.getElementById('add-result').classList.add('show'); }

// Zodiac
const zodiacSigns = [ { n: isArabic ? 'Ø§Ù„Ø¬Ø¯ÙŠ' : 'Capricorn', i: 'â™‘', s: [12, 22], e: [1, 19] }, { n: isArabic ? 'Ø§Ù„Ø¯Ù„Ùˆ' : 'Aquarius', i: 'â™’', s: [1, 20], e: [2, 18] }, { n: isArabic ? 'Ø§Ù„Ø­ÙˆØª' : 'Pisces', i: 'â™“', s: [2, 19], e: [3, 20] }, { n: isArabic ? 'Ø§Ù„Ø­Ù…Ù„' : 'Aries', i: 'â™ˆ', s: [3, 21], e: [4, 19] }, { n: isArabic ? 'Ø§Ù„Ø«ÙˆØ±' : 'Taurus', i: 'â™‰', s: [4, 20], e: [5, 20] }, { n: isArabic ? 'Ø§Ù„Ø¬ÙˆØ²Ø§Ø¡' : 'Gemini', i: 'â™Š', s: [5, 21], e: [6, 20] }, { n: isArabic ? 'Ø§Ù„Ø³Ø±Ø·Ø§Ù†' : 'Cancer', i: 'â™‹', s: [6, 21], e: [7, 22] }, { n: isArabic ? 'Ø§Ù„Ø£Ø³Ø¯' : 'Leo', i: 'â™Œ', s: [7, 23], e: [8, 22] }, { n: isArabic ? 'Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡' : 'Virgo', i: 'â™', s: [8, 23], e: [9, 22] }, { n: isArabic ? 'Ø§Ù„Ù…ÙŠØ²Ø§Ù†' : 'Libra', i: 'â™', s: [9, 23], e: [10, 22] }, { n: isArabic ? 'Ø§Ù„Ø¹Ù‚Ø±Ø¨' : 'Scorpio', i: 'â™', s: [10, 23], e: [11, 21] }, { n: isArabic ? 'Ø§Ù„Ù‚ÙˆØ³' : 'Sagittarius', i: 'â™', s: [11, 22], e: [12, 21] } ];
function updateZodiac(m, d) { for (const z of zodiacSigns) { const [sm, sd] = z.s, [em, ed] = z.e; let match = false; if (sm === em) match = m === sm && d >= sd && d <= ed; else if (sm > em) match = (m === sm && d >= sd) || (m === em && d <= ed); else match = (m === sm && d >= sd) || (m === em && d <= ed); if (match) { document.getElementById('zodiac-icon').textContent = z.i; document.getElementById('zodiac-name').textContent = z.n; document.getElementById('zodiac-dates').textContent = `${monthNames[sm - 1]} ${sd} - ${monthNames[em - 1]} ${ed}`; return; } } }

// Init Dropdowns
function initDropdowns() {
  const prefix = 'birth';
  
  // Gregorian Month
  const gMonthSel = document.getElementById(`${prefix}-g-month`);
  if (gMonthSel) {
    gMonthSel.innerHTML = '<option value="">--</option>';
    for (let m = 1; m <= 12; m++) {
      gMonthSel.innerHTML += `<option value="${m}">${monthNames[m-1]} - ${m}</option>`;
    }
  }
  
  // Gregorian Day
  const gDaySel = document.getElementById(`${prefix}-g-day`);
  if (gDaySel) {
    gDaySel.innerHTML = '<option value="">--</option>';
    for (let d = 1; d <= 31; d++) {
      gDaySel.innerHTML += `<option value="${d}">${d}</option>`;
    }
  }
  
  // Hijri Month
  const hMonthSel = document.getElementById(`${prefix}-h-month`);
  if (hMonthSel) {
    hMonthSel.innerHTML = '<option value="">--</option>';
    for (let m = 1; m <= 12; m++) {
      hMonthSel.innerHTML += `<option value="${m}">${hijriMonthNames[m-1]} - ${m}</option>`;
    }
  }
  
  // Hijri Day
  const hDaySel = document.getElementById(`${prefix}-h-day`);
  if (hDaySel) {
    hDaySel.innerHTML = '<option value="">--</option>';
    for (let d = 1; d <= 30; d++) {
      hDaySel.innerHTML += `<option value="${d}">${d}</option>`;
    }
  }
  
  // Hour (12-hour format)
  const hour12Sel = document.getElementById(`${prefix}-hour12`);
  if (hour12Sel) {
    hour12Sel.innerHTML = '';
    for (let h = 1; h <= 12; h++) {
      hour12Sel.innerHTML += `<option value="${h}" ${h===12?'selected':''}>${h}</option>`;
    }
  }
  
  // Minute
  const minSel = document.getElementById(`${prefix}-minute`);
  if (minSel) {
    minSel.innerHTML = '';
    for (let m = 0; m <= 59; m++) {
      minSel.innerHTML += `<option value="${m}" ${m===0?'selected':''}>${String(m).padStart(2,'0')}</option>`;
    }
  }
  
  // Second
  const secSel = document.getElementById(`${prefix}-second`);
  if (secSel) {
    secSel.innerHTML = '';
    for (let s = 0; s <= 59; s++) {
      secSel.innerHTML += `<option value="${s}" ${s===0?'selected':''}>${String(s).padStart(2,'0')}</option>`;
    }
  }
}

// Update days based on month/year
function updateDays(prefix, type) {
  const y = getVal(`${prefix}-${type}-year`);
  const m = getVal(`${prefix}-${type}-month`);
  const daySel = document.getElementById(`${prefix}-${type}-day`);
  if (!daySel || !y || !m) return;
  
  const currentDay = getVal(`${prefix}-${type}-day`);
  const maxDays = type === 'g' ? getDaysInGMonth(y, m) : getDaysInHMonth(y, m);
  
  daySel.innerHTML = '<option value="">--</option>';
  for (let d = 1; d <= maxDays; d++) {
    daySel.innerHTML += `<option value="${d}" ${d===currentDay?'selected':''}>${d}</option>`;
  }
}

// Init
document.addEventListener('DOMContentLoaded', () => { 
  initDropdowns();
  const now = new Date(); 
  setDateTimeFromDate('diff-to', now); 
  setDateTimeFromDate('add', now); 
  startDiffAutoMode(); 
});
</script>

<script>
  window.toolsData = [{"id":"percentage","icon":"ğŸ”¢","name":"Percentage Calculator","keywords":"percentage calculator, calculate percentage, discount calculator, percent change","searchTerms":"percent percentage % discount sale off price change increase decrease difference quarter half third ratio math calculator profit loss tax margin fraction calculate how much what is of total part whole original cost selling buying before after","category":"calculators","categoryName":"Calculators","url":"../../en/tools/percentage.html"},{"id":"interest-calculator","icon":"ğŸ’°","name":"Interest Calculator","keywords":"interest calculator, simple interest, compound interest, loan calculator","searchTerms":"interest simple compound loan investment return profit bank money calculate annual monthly daily quarterly yearly principal rate time period accumulate savings deposit growth calculator finance financial how much earn","category":"calculators","categoryName":"Calculators","url":"../../en/tools/interest-calculator.html"},{"id":"loan-calculator","icon":"ğŸ¦","name":"Loan Calculator","keywords":"loan calculator, monthly payment, amortization schedule, mortgage calculator","searchTerms":"loan loans payment payments installment installments bank mortgage mortgages monthly schedule amortization calculate calculator interest principal finance financing car home personal","category":"calculators","categoryName":"Calculators","url":"../../en/tools/loan-calculator.html"},{"id":"body-calculator","icon":"âš–ï¸","name":"Body Calculator","keywords":"BMI calculator, body mass index, ideal weight, calorie calculator, body fat","searchTerms":"bmi body mass index weight fat calories calorie bmr tdee ideal healthy obesity overweight underweight waist hip ratio calculate calculator health fitness","category":"calculators","categoryName":"Calculators","url":"../../en/tools/body-calculator.html"},{"id":"age-calculator","icon":"ğŸ‚","name":"Age Calculator","keywords":"age calculator, calculate age, how old am I, zodiac sign, birthday calculator","searchTerms":"age birthday birth date zodiac calculate how old years months days weeks hours born sign horoscope difference between dates","category":"calculators","categoryName":"Calculators","url":"../../en/tools/age-calculator.html"}];
</script>
      </main>
      
      <footer class="main-footer">
        <p>Made with â¤ï¸ | All Rights Reserved Â© 2026 Udda</p>
      </footer>
    </div>
  </div>
  
  <!-- Settings Panel -->
  <div class="settings-overlay"></div>
  <div class="settings-panel">
    <div class="settings-header">
      <h2 class="settings-title">Settings</h2>
      <button class="settings-close" aria-label="Close">âœ•</button>
    </div>
    <div class="settings-content">
      <div class="settings-section">
        <div class="settings-section-title">Language</div>
        <div class="settings-option">
          <button class="settings-btn " data-lang-btn="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
          <button class="settings-btn active" data-lang-btn="en">English</button>
        </div>
      </div>
      <div class="settings-section">
        <div class="settings-section-title">Theme</div>
        <div class="settings-option">
          <button class="settings-btn" data-theme-btn="light">â˜€ï¸ Light</button>
          <button class="settings-btn" data-theme-btn="dark">ğŸŒ™ Dark</button>
          <button class="settings-btn active" data-theme-btn="auto">ğŸ’» Auto</button>
        </div>
      </div>
      <div class="settings-section">
        <button class="settings-btn" data-clear-data style="width:100%;justify-content:center;color:var(--error);">
          ğŸ—‘ï¸ Clear Saved Data
        </button>
      </div>
    </div>
  </div>
  
  <div class="toast"></div>
  <script src="../../assets/js/app.js"></script>
</body>
</html>