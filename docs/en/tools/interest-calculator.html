<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simple & Compound Interest Calculator - Calculate Interest Online | Udda</title>
  <meta name="description" content="Free Interest Calculator - Calculate simple and compound interest, investment returns, loan payments easily.">
  <meta name="keywords" content="interest calculator, simple interest, compound interest, loan calculator">
  <meta name="author" content="Udda">
  <meta name="robots" content="index, follow">
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="Simple & Compound Interest Calculator - Calculate Interest Online | Udda">
  <meta property="og:description" content="Free Interest Calculator - Calculate simple and compound interest, investment returns, loan payments easily.">
  <meta property="og:url" content="https://udda.tools/en/tools/interest-calculator.html">
  <meta property="og:site_name" content="Udda">
  <meta property="og:locale" content="en_US">
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Simple & Compound Interest Calculator - Calculate Interest Online | Udda">
  <meta name="twitter:description" content="Free Interest Calculator - Calculate simple and compound interest, investment returns, loan payments easily.">
  
  <link rel="alternate" hreflang="ar" href="https://udda.tools/ar/tools/interest-calculator.html">
  <link rel="alternate" hreflang="en" href="https://udda.tools/en/tools/interest-calculator.html">
  <link rel="alternate" hreflang="x-default" href="https://udda.tools/ar/tools/interest-calculator.html">
  <link rel="canonical" href="https://udda.tools/en/tools/interest-calculator.html">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/udda/assets/css/main.css">
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Interest Calculator",
    "description": "Free Interest Calculator - Calculate simple and compound interest, investment returns, loan payments easily.",
    "url": "https://udda.tools/en/tools/interest-calculator.html",
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "Any",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "inLanguage": ["ar", "en"],
    "isAccessibleForFree": true
  }
  </script>
</head>
<body data-tool-id="interest-calculator">
  <div class="app-container">
    <div class="sidebar-overlay"></div>
    
    <aside class="sidebar">
      <div class="sidebar-header">
        <a href="/udda/en/" class="logo">
          <div class="logo-icon">üîß</div>
          <span class="logo-text sidebar-text">Udda</span>
        </a>
      </div>
      
      <div class="sidebar-search">
        <div class="search-input-wrapper">
          <input type="text" class="search-input" placeholder="Search for a tool..." aria-label="Search for a tool...">
          <svg class="search-icon" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        
        <a href="/udda/en/" class="nav-item ">
          <span class="nav-item-icon">üè†</span>
          <span class="sidebar-text">Home</span>
        </a>
        <div class="nav-section open">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">üßÆ</span>
              <span class="sidebar-text">Calculators</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
            <a href="/udda/en/tools/percentage.html" class="nav-item ">
              <span class="nav-item-icon">üî¢</span>
              <span class="sidebar-text">Percentage Calculator</span>
            </a>
            <a href="/udda/en/tools/interest-calculator.html" class="nav-item active">
              <span class="nav-item-icon">üí∞</span>
              <span class="sidebar-text">Interest Calculator</span>
            </a>
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">üîÑ</span>
              <span class="sidebar-text">Converters</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">üìù</span>
              <span class="sidebar-text">Text Tools</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">üìÖ</span>
              <span class="sidebar-text">Date & Time</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">‚ö°</span>
              <span class="sidebar-text">Generators</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">üñºÔ∏è</span>
              <span class="sidebar-text">Image Tools</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">üíª</span>
              <span class="sidebar-text">Developer Tools</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
        <div class="nav-section ">
          <div class="nav-section-title">
            <span>
              <span class="nav-section-icon">üè†</span>
              <span class="sidebar-text">Everyday Tools</span>
            </span>
            <svg class="nav-section-arrow sidebar-text" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </div>
          <div class="nav-section-items">
          </div>
        </div>
      </nav>
      
      <div class="sidebar-footer">
        <button class="sidebar-toggle" aria-label="Toggle sidebar">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path>
          </svg>
          <span class="sidebar-text">Sidebar</span>
        </button>
      </div>
    </aside>
    
    <div class="main-content">
      <header class="main-header">
        <button class="header-btn mobile-menu-btn" aria-label="Menu">
          <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
        
        <nav class="header-breadcrumb">
          <a href="/udda/en/" class="breadcrumb-link">Home</a>
          <span class="breadcrumb-separator">‚Ä∫</span>
          <a href="/udda/en/category/calculators.html" class="breadcrumb-link">Calculators</a>
          <span class="breadcrumb-separator">‚Ä∫</span>
          <span class="breadcrumb-current">Interest Calculator</span>
        </nav>
        
        <div class="header-actions">
          <button class="header-btn" data-favorite-btn aria-label="Add to Favorites">‚òÜ</button>
          <button class="header-btn" onclick="App.shareUrl('Interest Calculator')" aria-label="Share">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
              <polyline points="16 6 12 2 8 6"></polyline>
              <line x1="12" y1="2" x2="12" y2="15"></line>
            </svg>
          </button>
          <button class="header-btn" data-open-settings aria-label="Settings">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
          </button>
        </div>
      </header>
      
      <main class="page-content">
        <!-- Tool: Interest Calculator | ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸÅŸàÿßÿ¶ÿØ -->
<div class="tool-card">
  <div class="tool-header">
    <div class="tool-icon">üí∞</div>
    <div>
      <h1 class="tool-title">Interest Calculator</h1>
      <p class="tool-description">Calculate simple and compound interest easily</p>
    </div>
  </div>
  
  <!-- Simple Interest Section -->
  <div class="interest-section">
    <h3 class="section-title">üìä Simple Interest</h3>
    <div class="calc-row-inline">
      <span class="calc-label">Principal Amount</span>
      <input type="number" class="calc-input-sm" id="simple-principal" placeholder="10000" oninput="calcSimple()">
      <span class="calc-label">√ó Interest Rate</span>
      <input type="number" class="calc-input-sm" id="simple-rate" placeholder="5" oninput="calcSimple()">
      <span class="calc-label">% √ó Time (years)</span>
      <input type="number" class="calc-input-sm" id="simple-time" placeholder="3" oninput="calcSimple()">
    </div>
    <div class="results-row">
      <div class="result-box">
        <span class="result-label">Total Interest</span>
        <span class="calc-result" id="simple-interest">‚Äî</span>
        <div class="result-controls">
          <button class="ctrl-btn" onclick="adjustPrecision('simple-interest', -1)">‚àí</button>
          <button class="ctrl-btn" onclick="adjustPrecision('simple-interest', 1)">+</button>
          <button class="ctrl-btn" onclick="copyResult('simple-interest')">üìã</button>
        </div>
      </div>
      <div class="result-box">
        <span class="result-label">Total Amount</span>
        <span class="calc-result increase" id="simple-total">‚Äî</span>
        <div class="result-controls">
          <button class="ctrl-btn" onclick="adjustPrecision('simple-total', -1)">‚àí</button>
          <button class="ctrl-btn" onclick="adjustPrecision('simple-total', 1)">+</button>
          <button class="ctrl-btn" onclick="copyResult('simple-total')">üìã</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Compound Interest Section -->
  <div class="interest-section">
    <h3 class="section-title">üìà Compound Interest</h3>
    <div class="calc-row-inline">
      <span class="calc-label">Principal Amount</span>
      <input type="number" class="calc-input-sm" id="compound-principal" placeholder="1000" oninput="calcCompound()">
      <span class="calc-label">√ó Interest Rate</span>
      <input type="number" class="calc-input-sm" id="compound-rate" placeholder="5" oninput="calcCompound()">
      <span class="calc-label">% √ó Time (years)</span>
      <input type="number" class="calc-input-sm" id="compound-time" placeholder="10" oninput="calcCompound()">
    </div>
    <div class="calc-row-inline">
      <span class="calc-label">Compound</span>
      <select class="calc-select" id="compound-frequency" onchange="calcCompound()">
        <option value="1">Yearly</option>
        <option value="2">Half-yearly</option>
        <option value="4">Quarterly</option>
        <option value="12" selected>Monthly</option>
        <option value="365">Daily</option>
      </select>
    </div>
    
    <!-- Main Results -->
    <div class="main-results" id="main-results" style="display: none;">
      <div class="big-result">
        <span class="big-result-label">Total Amount</span>
        <div class="big-result-row">
          <span class="big-result-value" id="compound-total-big">‚Äî</span>
          <button class="copy-big-btn" onclick="copyBigResult()" title="Copy">üìã</button>
        </div>
      </div>
      <div class="sub-results">
        <div class="sub-result">
          <span class="sub-label">Total Interest</span>
          <span class="sub-value interest-color" id="compound-interest-display">‚Äî</span>
        </div>
        <div class="sub-result">
          <span class="sub-label">Principal Amount</span>
          <span class="sub-value" id="compound-principal-display">‚Äî</span>
        </div>
      </div>
      
      <!-- Export Buttons -->
      <div class="export-buttons">
        <button class="export-btn" onclick="exportToExcel()">
          <span class="btn-icon">üìä</span>
          <span>Export Excel</span>
        </button>
        <button class="export-btn chart-btn" onclick="downloadChart()">
          <span class="btn-icon">üìà</span>
          <span>Download Chart</span>
        </button>
        <button class="export-btn secondary" onclick="copyAllData()">
          <span class="btn-icon">üìã</span>
          <span>Copy All</span>
        </button>
      </div>
    </div>
    
    <!-- Chart -->
    <div class="chart-container" id="chart-container" style="display: none;">
      <canvas id="growth-chart"></canvas>
    </div>
    
    <!-- Yearly Table -->
    <div class="table-container" id="table-container" style="display: none;">
      <table class="data-table">
        <thead>
          <tr>
            <th>Year</th>
            <th>Start Balance</th>
            <th>Yearly Interest</th>
            <th>Accumulated Interest</th>
            <th>End Balance</th>
          </tr>
        </thead>
        <tbody id="yearly-table-body">
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- How to Use -->
<div class="how-to-use">
  <h3>üìñ How to Use</h3>
  <p>Enter the principal amount, interest rate, and time period. For compound interest, select the compounding frequency.</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/exceljs@4.4.0/dist/exceljs.min.js"></script>

<style>
.interest-section {
  background: var(--bg-tertiary);
  border-radius: var(--border-radius-lg);
  padding: 24px;
  margin-bottom: 20px;
}

.section-title {
  margin: 0 0 20px 0;
  font-size: 1.2rem;
  color: var(--text-primary);
}

.calc-row-inline {
  display: flex;
  align-items: baseline;
  gap: 8px;
  flex-wrap: wrap;
  padding: 16px 0;
  font-size: 1.15rem;
  line-height: 2.2;
}

.calc-label {
  color: var(--text-primary);
}

.calc-input-sm {
  width: 100px;
  padding: 4px 8px;
  background: transparent;
  border: none;
  border-bottom: 2px solid var(--accent-primary);
  border-radius: 0;
  color: var(--accent-primary);
  font-size: 1.15rem;
  font-weight: 600;
  font-family: inherit;
  text-align: center;
  transition: all var(--transition-fast);
}

.calc-input-sm:focus {
  outline: none;
  border-bottom-color: var(--accent-secondary);
  background: rgba(99, 102, 241, 0.05);
}

.calc-input-sm::placeholder {
  color: var(--text-muted);
  font-weight: 400;
}

.calc-select {
  padding: 8px 16px;
  background: var(--bg-secondary);
  border: 2px solid var(--border-color);
  border-radius: var(--border-radius);
  color: var(--text-primary);
  font-size: 1rem;
  font-family: inherit;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.calc-select:focus {
  outline: none;
  border-color: var(--accent-primary);
}

.results-row {
  display: flex;
  gap: 20px;
  margin-top: 20px;
  flex-wrap: wrap;
}

.result-box {
  flex: 1;
  min-width: 200px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 16px;
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
}

.result-label {
  font-size: 0.9rem;
  color: var(--text-secondary);
}

.calc-result {
  min-width: 60px;
  padding: 8px 16px;
  background: var(--accent-gradient);
  border-radius: var(--border-radius);
  color: white;
  font-size: 1.3rem;
  font-weight: 700;
  text-align: center;
}

.calc-result.increase {
  background: linear-gradient(135deg, #22c55e, #16a34a);
}

.result-controls {
  display: flex;
  gap: 4px;
  justify-content: center;
}

.ctrl-btn {
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 6px;
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  font-size: 1rem;
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
}

.ctrl-btn:hover {
  background: var(--accent-primary);
  color: white;
}

/* Main Results Display */
.main-results {
  margin-top: 24px;
  padding: 24px;
  background: var(--bg-secondary);
  border-radius: var(--border-radius-lg);
  text-align: center;
}

.big-result {
  margin-bottom: 16px;
}

.big-result-label {
  display: block;
  font-size: 0.95rem;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.big-result-value {
  font-size: 2.5rem;
  font-weight: 800;
  background: linear-gradient(135deg, #22c55e, #16a34a);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.sub-results {
  display: flex;
  justify-content: center;
  gap: 40px;
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
}

.sub-result {
  text-align: center;
}

.sub-label {
  display: block;
  font-size: 0.85rem;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.sub-value {
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--text-primary);
}

.sub-value.interest-color {
  color: #22c55e;
}

/* Big Result Copy Button */
.big-result-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.copy-big-btn {
  width: 40px;
  height: 40px;
  border: none;
  border-radius: 50%;
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  font-size: 1.2rem;
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
}

.copy-big-btn:hover {
  background: var(--accent-primary);
  color: white;
  transform: scale(1.1);
}

/* Export Buttons */
.export-buttons {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid var(--border-color);
}

.export-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 24px;
  border: none;
  border-radius: var(--border-radius);
  background: linear-gradient(135deg, #22c55e, #16a34a);
  color: white;
  font-size: 0.95rem;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.export-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
}

.export-btn.secondary {
  background: var(--accent-gradient);
}

.export-btn.secondary:hover {
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
}

.export-btn.chart-btn {
  background: linear-gradient(135deg, #f59e0b, #d97706);
}

.export-btn.chart-btn:hover {
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
}

.btn-icon {
  font-size: 1.1rem;
}

/* Chart */
.chart-container {
  margin-top: 24px;
  padding: 20px;
  background: var(--bg-secondary);
  border-radius: var(--border-radius-lg);
  height: 320px;
}

/* Table */
.table-container {
  margin-top: 24px;
  overflow-x: auto;
  border-radius: var(--border-radius-lg);
  max-height: 400px;
  overflow-y: auto;
}

.data-table {
  width: 100%;
  border-collapse: collapse;
  background: var(--bg-secondary);
  font-size: 0.95rem;
}

.data-table th,
.data-table td {
  padding: 12px 16px;
  text-align: center;
  border-bottom: 1px solid var(--border-color);
}

.data-table th {
  background: var(--accent-primary);
  color: white;
  font-weight: 600;
  position: sticky;
  top: 0;
  z-index: 1;
}

.data-table tbody tr:hover {
  background: var(--bg-tertiary);
}

.data-table td:first-child {
  font-weight: 600;
  color: var(--accent-primary);
}

.data-table td:last-child {
  font-weight: 700;
  color: var(--text-primary);
}

.interest-cell {
  color: #22c55e !important;
}

@media (max-width: 768px) {
  .calc-input-sm {
    width: 80px;
    font-size: 1rem;
  }
  
  .result-box {
    min-width: 150px;
  }
  
  .calc-result {
    font-size: 1.1rem;
  }
  
  .big-result-value {
    font-size: 2rem;
  }
  
  .sub-results {
    gap: 20px;
  }
  
  .data-table {
    font-size: 0.8rem;
  }
  
  .data-table th,
  .data-table td {
    padding: 8px 6px;
  }
  
  .chart-container {
    height: 250px;
  }
  
  .export-buttons {
    flex-direction: column;
    gap: 10px;
  }
  
  .export-btn {
    width: 100%;
    justify-content: center;
  }
}
</style>

<script>
// Store precision for each result
const interestData = {
  'simple-interest': { raw: null, precision: 2 },
  'simple-total': { raw: null, precision: 2 },
  'compound-interest': { raw: null, precision: 2 },
  'compound-total': { raw: null, precision: 2 }
};

let growthChart = null;
let yearlyDataCache = [];  // Store yearly data for export

function formatNumber(num, precision) {
  if (num === null || isNaN(num)) return '‚Äî';
  return num.toFixed(precision);
}

function formatCurrency(num) {
  if (num === null || isNaN(num)) return '‚Äî';
  return num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
}

function updateResult(id) {
  const data = interestData[id];
  const el = document.getElementById(id);
  if (el) el.textContent = formatNumber(data.raw, data.precision);
}

function adjustPrecision(id, delta) {
  const data = interestData[id];
  if (data.raw === null) return;
  data.precision = Math.max(0, Math.min(10, data.precision + delta));
  updateResult(id);
}

function copyResult(id) {
  const data = interestData[id];
  if (data.raw === null) return;
  navigator.clipboard.writeText(data.raw.toFixed(data.precision)).then(() => {
    App.showToast(App.state.lang === 'ar' ? 'ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ!' : 'Copied!');
  });
}

// Simple Interest: I = P √ó r √ó t
function calcSimple() {
  const P = parseFloat(document.getElementById('simple-principal').value);
  const r = parseFloat(document.getElementById('simple-rate').value) / 100;
  const t = parseFloat(document.getElementById('simple-time').value);
  
  if (!isNaN(P) && !isNaN(r) && !isNaN(t)) {
    const interest = P * r * t;
    const total = P + interest;
    
    interestData['simple-interest'].raw = interest;
    interestData['simple-total'].raw = total;
  } else {
    interestData['simple-interest'].raw = null;
    interestData['simple-total'].raw = null;
  }
  
  updateResult('simple-interest');
  updateResult('simple-total');
}

// Compound Interest: A = P √ó (1 + r)^(n√ót)
function calcCompound() {
  const P = parseFloat(document.getElementById('compound-principal').value);
  const r = parseFloat(document.getElementById('compound-rate').value) / 100;
  const t = parseInt(document.getElementById('compound-time').value);
  const n = parseFloat(document.getElementById('compound-frequency').value);
  
  if (!isNaN(P) && !isNaN(r) && !isNaN(t) && !isNaN(n) && P > 0 && t > 0) {
    const total = P * Math.pow(1 + r, n * t);
    const interest = total - P;
    
    interestData['compound-interest'].raw = interest;
    interestData['compound-total'].raw = total;
    
    // Update main display
    document.getElementById('main-results').style.display = 'block';
    document.getElementById('compound-total-big').textContent = '$' + formatCurrency(total);
    document.getElementById('compound-interest-display').textContent = '$' + formatCurrency(interest);
    document.getElementById('compound-principal-display').textContent = '$' + formatCurrency(P);
    
    // Generate yearly data and update chart/table
    generateYearlyData(P, r, n, t);
    
    document.getElementById('chart-container').style.display = 'block';
    document.getElementById('table-container').style.display = 'block';
  } else {
    interestData['compound-interest'].raw = null;
    interestData['compound-total'].raw = null;
    
    document.getElementById('main-results').style.display = 'none';
    document.getElementById('chart-container').style.display = 'none';
    document.getElementById('table-container').style.display = 'none';
  }
}

function generateYearlyData(P, r, n, years) {
  const yearlyData = [];
  let balance = P;
  let totalInterest = 0;
  
  for (let year = 1; year <= years; year++) {
    const startBalance = balance;
    const periodsThisYear = n;
    const endBalance = startBalance * Math.pow(1 + r, periodsThisYear);
    const yearInterest = endBalance - startBalance;
    totalInterest += yearInterest;
    
    yearlyData.push({
      year,
      startBalance,
      yearInterest,
      totalInterest,
      endBalance
    });
    
    balance = endBalance;
  }
  
  yearlyDataCache = yearlyData;  // Cache for export
  
  updateChart(yearlyData, P);
  updateTable(yearlyData);
}

function updateChart(data, principal) {
  const ctx = document.getElementById('growth-chart').getContext('2d');
  
  const labels = data.map(d => d.year);
  const balances = data.map(d => d.endBalance);
  const principalLine = data.map(() => principal);
  
  if (growthChart) {
    growthChart.destroy();
  }
  
  const isArabic = App.state.lang === 'ar';
  
  // Detect current theme
  const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
  
  // Colors based on theme
  const textColor = isDark ? '#E5E7EB' : '#374151';
  const gridColor = isDark ? '#374151' : '#E5E7EB';
  const bgColor = isDark ? '#1F2937' : '#FFFFFF';
  
  growthChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [
        {
          label: isArabic ? 'ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä' : 'End Balance',
          data: balances,
          backgroundColor: 'rgba(34, 197, 94, 0.85)',
          borderColor: 'rgba(22, 163, 74, 1)',
          borderWidth: 2,
          borderRadius: 6,
          order: 2
        },
        {
          label: isArabic ? 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ£ÿµŸÑŸä' : 'Principal',
          data: principalLine,
          type: 'line',
          borderColor: isDark ? 'rgba(129, 140, 248, 1)' : 'rgba(99, 102, 241, 1)',
          borderWidth: 3,
          borderDash: [8, 4],
          fill: false,
          pointRadius: 0,
          order: 1
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: 'bottom',
          rtl: isArabic,
          labels: {
            color: textColor,
            padding: 20,
            font: { family: 'inherit', size: 13, weight: '600' }
          }
        },
        tooltip: {
          rtl: isArabic,
          backgroundColor: isDark ? 'rgba(255, 255, 255, 0.95)' : 'rgba(17, 24, 39, 0.95)',
          titleColor: isDark ? '#1F2937' : '#FFFFFF',
          bodyColor: isDark ? '#374151' : '#E5E7EB',
          titleFont: { size: 14, weight: '600' },
          bodyFont: { size: 13 },
          padding: 12,
          callbacks: {
            label: function(context) {
              return context.dataset.label + ': $' + context.raw.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            }
          }
        }
      },
      scales: {
        x: {
          title: {
            display: true,
            text: isArabic ? 'ÿßŸÑÿ≥ŸÜÿ©' : 'Year',
            color: textColor,
            font: { size: 13, weight: '600' }
          },
          grid: { display: false },
          ticks: { 
            color: textColor,
            font: { size: 12, weight: '500' }
          }
        },
        y: {
          title: {
            display: true,
            text: isArabic ? 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ($)' : 'Amount ($)',
            color: textColor,
            font: { size: 13, weight: '600' }
          },
          grid: {
            color: gridColor
          },
          ticks: {
            color: textColor,
            font: { size: 12, weight: '500' },
            callback: function(value) {
              if (value >= 1000000) return '$' + (value/1000000).toFixed(1) + 'M';
              if (value >= 1000) return '$' + (value/1000).toFixed(0) + 'K';
              return '$' + value.toLocaleString();
            }
          }
        }
      }
    }
  });
}

function updateTable(data) {
  const tbody = document.getElementById('yearly-table-body');
  tbody.innerHTML = '';
  
  data.forEach(row => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${row.year}</td>
      <td>$${formatCurrency(row.startBalance)}</td>
      <td class="interest-cell">$${formatCurrency(row.yearInterest)}</td>
      <td class="interest-cell">$${formatCurrency(row.totalInterest)}</td>
      <td>$${formatCurrency(row.endBalance)}</td>
    `;
    tbody.appendChild(tr);
  });
}

// Watch for theme changes and update chart
const themeObserver = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    if (mutation.attributeName === 'data-theme' && yearlyDataCache.length > 0) {
      const P = parseFloat(document.getElementById('compound-principal').value);
      updateChart(yearlyDataCache, P);
    }
  });
});
themeObserver.observe(document.documentElement, { attributes: true });

// Copy big result
function copyBigResult() {
  const total = interestData['compound-total'].raw;
  if (total === null) return;
  
  navigator.clipboard.writeText(total.toFixed(2)).then(() => {
    App.showToast(App.state.lang === 'ar' ? 'ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ!' : 'Copied!');
  });
}

// Export to Excel with chart image embedded using ExcelJS
async function exportToExcel() {
  if (yearlyDataCache.length === 0) return;
  
  const isArabic = App.state.lang === 'ar';
  const P = parseFloat(document.getElementById('compound-principal').value);
  const r = parseFloat(document.getElementById('compound-rate').value);
  const t = parseInt(document.getElementById('compound-time').value);
  const freq = document.getElementById('compound-frequency');
  const freqText = freq.options[freq.selectedIndex].text;
  
  // Create workbook
  const workbook = new ExcelJS.Workbook();
  workbook.creator = 'Udda Tools';
  workbook.created = new Date();
  
  const sheetName = isArabic ? 'ÿßŸÑŸÅÿßÿ¶ÿØÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿ©' : 'Compound Interest';
  const worksheet = workbook.addWorksheet(sheetName);
  
  // Set RTL for Arabic
  if (isArabic) {
    worksheet.views = [{ rightToLeft: true }];
  }
  
  // Title
  worksheet.mergeCells('A1:E1');
  const titleCell = worksheet.getCell('A1');
  titleCell.value = isArabic ? 'ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸÅÿßÿ¶ÿØÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿ©' : 'Compound Interest Calculator';
  titleCell.font = { size: 18, bold: true, color: { argb: 'FF6366F1' } };
  titleCell.alignment = { horizontal: 'center', vertical: 'middle' };
  worksheet.getRow(1).height = 30;
  
  // Summary section
  const summaryData = [
    [isArabic ? 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ£ÿµŸÑŸä' : 'Principal', P],
    [isArabic ? 'ŸÖÿπÿØŸÑ ÿßŸÑŸÅÿßÿ¶ÿØÿ©' : 'Interest Rate', r + '%'],
    [isArabic ? 'ÿßŸÑŸÖÿØÿ© (ÿ≥ŸÜŸàÿßÿ™)' : 'Time (years)', t],
    [isArabic ? 'ÿßŸÑÿ™ÿ±ŸÉŸäÿ®' : 'Compound', freqText],
  ];
  
  summaryData.forEach((row, i) => {
    const rowNum = i + 3;
    worksheet.getCell(`A${rowNum}`).value = row[0];
    worksheet.getCell(`A${rowNum}`).font = { bold: true };
    worksheet.getCell(`B${rowNum}`).value = row[1];
  });
  
  // Results section with background
  worksheet.getCell('A8').value = isArabic ? 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÜŸáÿßÿ¶Ÿä' : 'Total Amount';
  worksheet.getCell('A8').font = { bold: true, size: 12 };
  worksheet.getCell('B8').value = interestData['compound-total'].raw;
  worksheet.getCell('B8').numFmt = '$#,##0.00';
  worksheet.getCell('B8').font = { bold: true, size: 14, color: { argb: 'FF22C55E' } };
  
  worksheet.getCell('A9').value = isArabic ? 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÅÿßÿ¶ÿØÿ©' : 'Total Interest';
  worksheet.getCell('A9').font = { bold: true, size: 12 };
  worksheet.getCell('B9').value = interestData['compound-interest'].raw;
  worksheet.getCell('B9').numFmt = '$#,##0.00';
  worksheet.getCell('B9').font = { bold: true, size: 14, color: { argb: 'FF22C55E' } };
  
  // Table headers
  const headerRow = 12;
  const headers = isArabic 
    ? ['ÿßŸÑÿ≥ŸÜÿ©', 'ÿ±ÿµŸäÿØ ÿßŸÑÿ®ÿØÿßŸäÿ©', 'ÿßŸÑŸÅÿßÿ¶ÿØÿ© ÿßŸÑÿ≥ŸÜŸàŸäÿ©', 'ÿßŸÑŸÅÿßÿ¶ÿØÿ© ÿßŸÑŸÖÿ™ÿ±ÿßŸÉŸÖÿ©', 'ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä']
    : ['Year', 'Start Balance', 'Yearly Interest', 'Accumulated Interest', 'End Balance'];
  
  headers.forEach((header, i) => {
    const cell = worksheet.getCell(headerRow, i + 1);
    cell.value = header;
    cell.font = { bold: true, color: { argb: 'FFFFFFFF' } };
    cell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FF6366F1' } };
    cell.alignment = { horizontal: 'center' };
    cell.border = {
      top: { style: 'thin' },
      bottom: { style: 'thin' },
      left: { style: 'thin' },
      right: { style: 'thin' }
    };
  });
  
  // Table data
  yearlyDataCache.forEach((row, i) => {
    const rowNum = headerRow + 1 + i;
    worksheet.getCell(rowNum, 1).value = row.year;
    worksheet.getCell(rowNum, 1).alignment = { horizontal: 'center' };
    worksheet.getCell(rowNum, 2).value = row.startBalance;
    worksheet.getCell(rowNum, 3).value = row.yearInterest;
    worksheet.getCell(rowNum, 4).value = row.totalInterest;
    worksheet.getCell(rowNum, 5).value = row.endBalance;
    
    // Format currency and borders
    for (let col = 1; col <= 5; col++) {
      const cell = worksheet.getCell(rowNum, col);
      if (col > 1) cell.numFmt = '$#,##0.00';
      cell.border = {
        top: { style: 'thin', color: { argb: 'FFE5E7EB' } },
        bottom: { style: 'thin', color: { argb: 'FFE5E7EB' } },
        left: { style: 'thin', color: { argb: 'FFE5E7EB' } },
        right: { style: 'thin', color: { argb: 'FFE5E7EB' } }
      };
      
      // Alternate row colors
      if (i % 2 === 0) {
        cell.fill = { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FFF9FAFB' } };
      }
    }
  });
  
  // Set column widths
  worksheet.columns = [
    { width: 12 },
    { width: 18 },
    { width: 18 },
    { width: 22 },
    { width: 18 }
  ];
  
  // Add chart image
  const canvas = document.getElementById('growth-chart');
  const tempCanvas = document.createElement('canvas');
  const tempCtx = tempCanvas.getContext('2d');
  tempCanvas.width = canvas.width;
  tempCanvas.height = canvas.height;
  tempCtx.fillStyle = '#ffffff';
  tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
  tempCtx.drawImage(canvas, 0, 0);
  
  const chartImageBase64 = tempCanvas.toDataURL('image/png').split(',')[1];
  
  const imageId = workbook.addImage({
    base64: chartImageBase64,
    extension: 'png',
  });
  
  const chartStartRow = headerRow + yearlyDataCache.length + 3;
  worksheet.addImage(imageId, {
    tl: { col: 0, row: chartStartRow },
    ext: { width: 600, height: 300 }
  });
  
  // Generate and download
  const buffer = await workbook.xlsx.writeBuffer();
  const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });
  const url = URL.createObjectURL(blob);
  
  const link = document.createElement('a');
  link.href = url;
  link.download = isArabic ? 'ÿ≠ÿßÿ≥ÿ®ÿ©_ÿßŸÑŸÅÿßÿ¶ÿØÿ©_ÿßŸÑŸÖÿ±ŸÉÿ®ÿ©.xlsx' : 'compound_interest_calculator.xlsx';
  link.click();
  
  URL.revokeObjectURL(url);
  
  App.showToast(isArabic ? 'ÿ™ŸÖ ÿßŸÑÿ™ÿµÿØŸäÿ± ŸÖÿπ ÿßŸÑŸÖÿÆÿ∑ÿ∑!' : 'Exported with chart!');
}

// Copy all data to clipboard
function copyAllData() {
  if (yearlyDataCache.length === 0) return;
  
  const isArabic = App.state.lang === 'ar';
  const P = parseFloat(document.getElementById('compound-principal').value);
  const r = parseFloat(document.getElementById('compound-rate').value);
  const t = parseInt(document.getElementById('compound-time').value);
  const freq = document.getElementById('compound-frequency');
  const freqText = freq.options[freq.selectedIndex].text;
  
  let text = '';
  
  // Title and summary
  text += (isArabic ? 'ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸÅÿßÿ¶ÿØÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿ©\n' : 'Compound Interest Calculator\n');
  text += '‚ïê'.repeat(40) + '\n\n';
  
  text += (isArabic ? 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ£ÿµŸÑŸä: ' : 'Principal: ') + '$' + formatCurrency(P) + '\n';
  text += (isArabic ? 'ŸÖÿπÿØŸÑ ÿßŸÑŸÅÿßÿ¶ÿØÿ©: ' : 'Interest Rate: ') + r + '%\n';
  text += (isArabic ? 'ÿßŸÑŸÖÿØÿ©: ' : 'Time: ') + t + (isArabic ? ' ÿ≥ŸÜŸàÿßÿ™\n' : ' years\n');
  text += (isArabic ? 'ÿßŸÑÿ™ÿ±ŸÉŸäÿ®: ' : 'Compound: ') + freqText + '\n\n';
  
  text += '‚ïê'.repeat(40) + '\n';
  text += (isArabic ? 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÜŸáÿßÿ¶Ÿä: ' : 'Total Amount: ') + '$' + formatCurrency(interestData['compound-total'].raw) + '\n';
  text += (isArabic ? 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÅÿßÿ¶ÿØÿ©: ' : 'Total Interest: ') + '$' + formatCurrency(interestData['compound-interest'].raw) + '\n';
  text += '‚ïê'.repeat(40) + '\n\n';
  
  // Table
  const headers = isArabic 
    ? ['ÿßŸÑÿ≥ŸÜÿ©', 'ÿ±ÿµŸäÿØ ÿßŸÑÿ®ÿØÿßŸäÿ©', 'ÿßŸÑŸÅÿßÿ¶ÿØÿ© ÿßŸÑÿ≥ŸÜŸàŸäÿ©', 'ÿßŸÑŸÅÿßÿ¶ÿØÿ© ÿßŸÑŸÖÿ™ÿ±ÿßŸÉŸÖÿ©', 'ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä']
    : ['Year', 'Start Balance', 'Yearly Interest', 'Accumulated', 'End Balance'];
  
  text += headers.join('\t') + '\n';
  text += '‚îÄ'.repeat(60) + '\n';
  
  yearlyDataCache.forEach(row => {
    text += [
      row.year,
      '$' + formatCurrency(row.startBalance),
      '$' + formatCurrency(row.yearInterest),
      '$' + formatCurrency(row.totalInterest),
      '$' + formatCurrency(row.endBalance)
    ].join('\t') + '\n';
  });
  
  navigator.clipboard.writeText(text).then(() => {
    App.showToast(isArabic ? 'ÿ™ŸÖ ŸÜÿ≥ÿÆ ŸÉŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™!' : 'All data copied!');
  });
}

// Download chart as PNG image
function downloadChart() {
  if (!growthChart) return;
  
  const isArabic = App.state.lang === 'ar';
  const canvas = document.getElementById('growth-chart');
  
  // Create a temporary canvas with white background
  const tempCanvas = document.createElement('canvas');
  const tempCtx = tempCanvas.getContext('2d');
  tempCanvas.width = canvas.width;
  tempCanvas.height = canvas.height;
  
  // Fill white background
  tempCtx.fillStyle = '#ffffff';
  tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
  
  // Draw the chart on top
  tempCtx.drawImage(canvas, 0, 0);
  
  // Convert to image and download
  const link = document.createElement('a');
  link.download = isArabic ? 'ŸÖÿÆÿ∑ÿ∑_ÿßŸÑŸÅÿßÿ¶ÿØÿ©_ÿßŸÑŸÖÿ±ŸÉÿ®ÿ©.png' : 'compound_interest_chart.png';
  link.href = tempCanvas.toDataURL('image/png');
  link.click();
  
  App.showToast(isArabic ? 'ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿÆÿ∑ÿ∑!' : 'Chart downloaded!');
}
</script>

<script>
  window.toolsData = [{"id":"percentage","icon":"üî¢","name":"Percentage Calculator","keywords":"percentage calculator, calculate percentage, discount calculator, percent change","searchTerms":"percent percentage % discount sale off price change increase decrease difference quarter half third ratio math calculator profit loss tax margin fraction calculate how much what is of total part whole original cost selling buying before after","category":"calculators","categoryName":"Calculators","url":"/udda/en/tools/percentage.html"},{"id":"interest-calculator","icon":"üí∞","name":"Interest Calculator","keywords":"interest calculator, simple interest, compound interest, loan calculator","searchTerms":"interest simple compound loan investment return profit bank money calculate annual monthly daily quarterly yearly principal rate time period accumulate savings deposit growth calculator finance financial how much earn","category":"calculators","categoryName":"Calculators","url":"/udda/en/tools/interest-calculator.html"}];
</script>
      </main>
      
      <footer class="main-footer">
        <p>Made with ‚ù§Ô∏è | All Rights Reserved ¬© 2026 Udda</p>
      </footer>
    </div>
  </div>
  
  <!-- Settings Panel -->
  <div class="settings-overlay"></div>
  <div class="settings-panel">
    <div class="settings-header">
      <h2 class="settings-title">Settings</h2>
      <button class="settings-close" aria-label="Close">‚úï</button>
    </div>
    <div class="settings-content">
      <div class="settings-section">
        <div class="settings-section-title">Language</div>
        <div class="settings-option">
          <button class="settings-btn " data-lang-btn="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
          <button class="settings-btn active" data-lang-btn="en">English</button>
        </div>
      </div>
      <div class="settings-section">
        <div class="settings-section-title">Theme</div>
        <div class="settings-option">
          <button class="settings-btn" data-theme-btn="light">‚òÄÔ∏è Light</button>
          <button class="settings-btn" data-theme-btn="dark">üåô Dark</button>
          <button class="settings-btn active" data-theme-btn="auto">üíª Auto</button>
        </div>
      </div>
      <div class="settings-section">
        <button class="settings-btn" data-clear-data style="width:100%;justify-content:center;color:var(--error);">
          üóëÔ∏è Clear Saved Data
        </button>
      </div>
    </div>
  </div>
  
  <div class="toast"></div>
  <script src="/udda/assets/js/app.js"></script>
</body>
</html>