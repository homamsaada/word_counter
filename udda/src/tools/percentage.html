<!-- Tool: Percentage Calculator | ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ¶ŸàŸäÿ© -->
<div class="tool-card">
  <div class="tool-header">
    <div class="tool-icon">üî¢</div>
    <div>
      <h1 class="tool-title">{{tool.name}}</h1>
      <p class="tool-description">{{tool.description}}</p>
    </div>
  </div>
  
  <!-- Calculator 1: What is X% of Y? -->
  <div class="calc-section">
    <h2 class="calc-section-title">
      <span>1Ô∏è‚É£</span>
      {{tool.whatIsPercent}} X% {{tool.of}} Y
    </h2>
    <div class="calc-row">
      <span class="calc-label">{{tool.whatIsPercent}}</span>
      <input type="number" class="calc-input" id="calc1-percent" placeholder="10">
      <span class="calc-label">{{tool.percentOf}}</span>
      <input type="number" class="calc-input" id="calc1-number" placeholder="200">
      <button class="calc-btn" onclick="calcPercentOf()">{{ui.calculate}}</button>
    </div>
    <div class="result-box" id="result1" style="display: none;">
      <div class="result-label">{{ui.result}}</div>
      <div class="result-value" id="result1-value">0</div>
    </div>
  </div>
  
  <!-- Calculator 2: X is what % of Y? -->
  <div class="calc-section">
    <h2 class="calc-section-title">
      <span>2Ô∏è‚É£</span>
      X {{tool.isWhatPercent}} Y
    </h2>
    <div class="calc-row">
      <input type="number" class="calc-input" id="calc2-part" placeholder="25">
      <span class="calc-label">{{tool.isWhatPercent}}</span>
      <input type="number" class="calc-input" id="calc2-whole" placeholder="200">
      <span class="calc-label">?</span>
      <button class="calc-btn" onclick="calcWhatPercent()">{{ui.calculate}}</button>
    </div>
    <div class="result-box" id="result2" style="display: none;">
      <div class="result-label">{{ui.result}}</div>
      <div class="result-value" id="result2-value">0%</div>
    </div>
  </div>
  
  <!-- Calculator 3: Percentage Change -->
  <div class="calc-section">
    <h2 class="calc-section-title">
      <span>3Ô∏è‚É£</span>
      {{tool.percentChange}}
    </h2>
    <div class="calc-row">
      <span class="calc-label">{{tool.from}}</span>
      <input type="number" class="calc-input" id="calc3-from" placeholder="100">
      <span class="calc-label">{{tool.to}}</span>
      <input type="number" class="calc-input" id="calc3-to" placeholder="150">
      <button class="calc-btn" onclick="calcPercentChange()">{{ui.calculate}}</button>
    </div>
    <div class="result-box" id="result3" style="display: none;">
      <div class="result-label">{{ui.result}}</div>
      <div class="result-value" id="result3-value">0%</div>
      <div class="result-extra" id="result3-type"></div>
    </div>
  </div>
  
  <!-- Calculator 4: Discount Calculator -->
  <div class="calc-section">
    <h2 class="calc-section-title">
      <span>4Ô∏è‚É£</span>
      {{tool.discount}}
    </h2>
    <div class="calc-row">
      <span class="calc-label">{{tool.originalPrice}}</span>
      <input type="number" class="calc-input" id="calc4-price" placeholder="500">
      <span class="calc-label">{{tool.discount}} %</span>
      <input type="number" class="calc-input" id="calc4-discount" placeholder="20">
      <button class="calc-btn" onclick="calcDiscount()">{{ui.calculate}}</button>
    </div>
    <div class="result-box" id="result4" style="display: none;">
      <div class="result-label">{{tool.finalPrice}}</div>
      <div class="result-value" id="result4-value">0</div>
      <div class="result-extra" id="result4-save"></div>
    </div>
  </div>
</div>

<!-- How to Use -->
<div class="how-to-use">
  <h3>üìñ {{ui.howToUse}}</h3>
  <p>{{tool.howToUseText}}</p>
</div>

<!-- Tool Script -->
<script>
// Calculator 1: What is X% of Y?
function calcPercentOf() {
  const percent = parseFloat(document.getElementById('calc1-percent').value);
  const number = parseFloat(document.getElementById('calc1-number').value);
  
  if (isNaN(percent) || isNaN(number)) {
    App.showToast('{{validationMsg}}');
    return;
  }
  
  const result = (percent / 100) * number;
  document.getElementById('result1-value').textContent = App.formatNumber(result);
  document.getElementById('result1').style.display = 'block';
}

// Calculator 2: X is what % of Y?
function calcWhatPercent() {
  const part = parseFloat(document.getElementById('calc2-part').value);
  const whole = parseFloat(document.getElementById('calc2-whole').value);
  
  if (isNaN(part) || isNaN(whole) || whole === 0) {
    App.showToast('{{validationMsg}}');
    return;
  }
  
  const result = (part / whole) * 100;
  document.getElementById('result2-value').textContent = App.formatNumber(result) + '%';
  document.getElementById('result2').style.display = 'block';
}

// Calculator 3: Percentage Change
function calcPercentChange() {
  const from = parseFloat(document.getElementById('calc3-from').value);
  const to = parseFloat(document.getElementById('calc3-to').value);
  
  if (isNaN(from) || isNaN(to) || from === 0) {
    App.showToast('{{validationMsg}}');
    return;
  }
  
  const change = ((to - from) / Math.abs(from)) * 100;
  const isIncrease = change >= 0;
  
  document.getElementById('result3-value').textContent = (isIncrease ? '+' : '') + App.formatNumber(change) + '%';
  document.getElementById('result3-type').textContent = isIncrease ? '{{tool.increase}} üìà' : '{{tool.decrease}} üìâ';
  document.getElementById('result3-value').style.color = isIncrease ? 'var(--success)' : 'var(--error)';
  document.getElementById('result3').style.display = 'block';
}

// Calculator 4: Discount
function calcDiscount() {
  const price = parseFloat(document.getElementById('calc4-price').value);
  const discount = parseFloat(document.getElementById('calc4-discount').value);
  
  if (isNaN(price) || isNaN(discount)) {
    App.showToast('{{validationMsg}}');
    return;
  }
  
  const savings = price * (discount / 100);
  const finalPrice = price - savings;
  
  document.getElementById('result4-value').textContent = App.formatNumber(finalPrice);
  document.getElementById('result4-save').textContent = '{{tool.youSave}}: ' + App.formatNumber(savings) + ' üí∞';
  document.getElementById('result4').style.display = 'block';
}

// Allow Enter key to calculate
document.querySelectorAll('.calc-input').forEach((input, index) => {
  input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      const section = Math.floor(index / 2) + 1;
      const btns = document.querySelectorAll('.calc-btn');
      btns[section - 1]?.click();
    }
  });
});
</script>
